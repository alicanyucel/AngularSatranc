{"version":3,"file":"flexi-select.mjs","sources":["../../../projects/flexi-select/src/lib/flexi-option.component.ts","../../../projects/flexi-select/src/lib/flexi-select.component.ts","../../../projects/flexi-select/src/lib/flexi-select.component.html","../../../projects/flexi-select/src/lib/flexi-select.module.ts","../../../projects/flexi-select/src/flexi-select.ts"],"sourcesContent":["import { Component, ElementRef, Input, OnInit, AfterViewInit, ViewEncapsulation } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'flexi-option',\r\n  standalone: true,\r\n  template: '<ng-content></ng-content>',\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class FlexiOptionComponent implements OnInit, AfterViewInit {\r\n  @Input() value: any;\r\n  viewValue: string = \"\";\r\n\r\n  constructor(private el: ElementRef) {}\r\n\r\n  ngOnInit() {\r\n    this.viewValue = this.el.nativeElement.innerText.trim();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.viewValue = this.el.nativeElement.innerText.trim();\r\n  }\r\n}\r\n","import { Component, ContentChildren, ElementRef, EventEmitter, HostListener, Input, OnChanges, Output, QueryList, SimpleChanges, ViewChild, ViewEncapsulation, forwardRef, signal } from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { FlexiOptionComponent } from './flexi-option.component';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'flexi-select',\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n  templateUrl: \"./flexi-select.component.html\",\r\n  styleUrl: \"./flexi-select.component.css\",\r\n  encapsulation: ViewEncapsulation.None,\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => FlexiSelectComponent),\r\n      multi: true\r\n    }\r\n  ]\r\n})\r\nexport class FlexiSelectComponent implements OnChanges {\r\n  @Input() data: any[] = [];\r\n  @Input() value: any;\r\n  @Input() label: any;\r\n  @Input() noData: string = \"Kayıt bulunamadı\";\r\n  @Input() selectOne: string = \"Seçim yapınız\";\r\n  @Input() themeClass: string = \"light\";\r\n  @Input() itemsPerPage : number = 30;\r\n  @Input() clientHeight : number = 180;\r\n  @Input() multiple : boolean = false;\r\n  @Input() closeAfterSelect : boolean = true;\r\n  @Input() height: string = \"100%\";\r\n  @Output(\"selected\") selected = new EventEmitter<any>();  \r\n\r\n  @ContentChildren(forwardRef(() => FlexiOptionComponent)) options!: QueryList<FlexiOptionComponent>;\r\n\r\n  @ViewChild(\"flexiSelectInput\") flexiSelectInput: ElementRef<HTMLInputElement> | undefined;\r\n\r\n  private onChange = (value: any) => {};\r\n  private onTouched = () => { };\r\n\r\n  filteredData = signal<any[]>([]);\r\n  selectedItem = signal<any>({});\r\n  selectedItems = signal<any[]>([]);\r\n  isOpen = signal<boolean>(false);\r\n  initialState : any;\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {    \r\n    this.filteredData.set(this.data.slice(0, this.itemsPerPage));    \r\n    \r\n    this.selectFirstOne();\r\n    this.selectInitialStateValue();  \r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    this.options.changes.subscribe(() => {\r\n      if (this.options && this.options.length) {\r\n        const optionData = this.options.map(option => ({\r\n          value: option.value,\r\n          label: option.viewValue\r\n        }));\r\n        this.data = optionData;\r\n        this.filteredData.set(this.data.slice(0, this.itemsPerPage));\r\n        this.selectFirstOne();\r\n        this.label = \"label\"\r\n        this.value = \"value\";\r\n        this.selectInitialStateValue();        \r\n      }\r\n    });\r\n  }\r\n\r\n  selectInitialStateValue(){\r\n    if(this.data.length > 0 && this.initialState){      \r\n      if(this.multiple){\r\n        this.clearAllSelected();        \r\n        this.selectedItems.set([]);\r\n        const list = [];\r\n        for(const val of this.initialState){\r\n          const d = this.data.find(p=> p[this.value] === val);\r\n          d.isSelected = true;\r\n\r\n          const item = {\r\n            [this.label]: d[this.label],\r\n            [this.value]: val\r\n          };\r\n\r\n          list.push(item);\r\n        }\r\n        this.selectedItems.set(list);        \r\n        this.initialState = undefined;\r\n      }else{\r\n        const val = this.data.find(p=> p[this.value] === this.initialState);\r\n        if(val){\r\n          this.clearAllSelected();        \r\n          this.selectedItem.set({[this.label]:val[this.label], [this.value]:val[this.value]});\r\n          val.isSelected = true;\r\n          const findValue = this.filteredData().find(p=> p[this.value] === val);\r\n          this.initialState = undefined;\r\n          if(findValue){\r\n            findValue.isSelected = true;\r\n          }\r\n        }\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  loadMoreData() {\r\n    const val = this.flexiSelectInput!.nativeElement.value.toString().toLocaleLowerCase(\"tr\");\r\n    let newData = val === \"\" ? this.data : this.data.filter(p => p[this.label].toString().toLocaleLowerCase(\"tr\").includes(val));\r\n    newData = newData.slice((this.filteredData().length - 1), (this.filteredData().length + this.itemsPerPage));\r\n    this.filteredData.set([...this.filteredData(), ...newData]);\r\n    this.clientHeight = this.clientHeight + 180;\r\n  }\r\n\r\n  onScroll(event: any) {\r\n    const element = event.target;\r\n\r\n    if (element.scrollHeight - element.scrollTop < 200) {\r\n      this.loadMoreData();\r\n    }\r\n  }\r\n\r\n  clearAllSelected() {\r\n    this.filteredData().forEach(val => {\r\n      val.isSelected = false;\r\n    });\r\n  }\r\n\r\n  selectFirstOne() {\r\n    if (this.filteredData().length === 0) {\r\n      return;\r\n    }\r\n    this.clearAllSelected();\r\n    this.filteredData()[0].isSelected = true;\r\n  }\r\n\r\n  openOrClose() {\r\n    this.isOpen.set(!this.isOpen()); \r\n\r\n    if (this.isOpen()) {\r\n      setTimeout(() => {\r\n        this.flexiSelectInput?.nativeElement.focus();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  handleClick(event: MouseEvent) {\r\n    const target = event.target as HTMLElement;\r\n    if (!target.closest('.flexi-select')) {\r\n      this.isOpen.set(false);\r\n    }\r\n  }\r\n\r\n  search() {\r\n    const val = this.flexiSelectInput!.nativeElement.value.toString().toLocaleLowerCase(\"tr\"); \r\n    const filtered = this.data.filter(p => p[this.label].toString().toLocaleLowerCase(\"tr\").includes(val)).slice(0,this.itemsPerPage);\r\n    this.filteredData.set(filtered);\r\n    if(!this.multiple){\r\n      this.selectFirstOne();\r\n    }    \r\n  }\r\n\r\n  setLiClass(item: any) {\r\n    if (item.isSelected) {\r\n      return \"flexi-select-li flexi-active\"\r\n    }\r\n\r\n    return \"flexi-select-li\"\r\n  }\r\n\r\n  onKeyDown(event: KeyboardEvent) {\r\n    const currentIndex = this.filteredData().findIndex(item => item.isSelected);\r\n\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault();\r\n      if (currentIndex !== -1) {\r\n        this.select(this.filteredData()[currentIndex]);\r\n      }\r\n    } else if (event.key === 'ArrowDown') {\r\n      event.preventDefault();\r\n      if (currentIndex < this.filteredData().length - 1) {\r\n        this.clearAllSelected();        \r\n        this.filteredData()[currentIndex + 1].isSelected = true;\r\n        this.scrollToElement(currentIndex + 1);\r\n      }\r\n    } else if (event.key === 'ArrowUp') {\r\n      event.preventDefault();\r\n      if (currentIndex > 0) {\r\n        this.clearAllSelected();        \r\n        this.filteredData()[currentIndex - 1].isSelected = true;\r\n        this.scrollToElement(currentIndex - 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  scrollToElement(index: number) {\r\n    const ulElement = document.querySelector('.flexi-select-ul') as HTMLElement;\r\n    const liElement = ulElement.children[index] as HTMLElement;\r\n    liElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\r\n  }\r\n\r\n  selectForMultiple(item: any) {     \r\n     const selectedItem = {\r\n      [this.label]: item[this.label],\r\n      [this.value]: item[this.value]\r\n    };\r\n    \r\n    if(this.selectedItems().length === 0){\r\n      this.clearAllSelected();\r\n    }\r\n\r\n    \r\n    const existingIndex = this.selectedItems().findIndex(existingItem => existingItem[this.value] === selectedItem[this.value]);\r\n\r\n    if (existingIndex > -1) {        \r\n        item.isSelected = false;\r\n        this.selectedItems.update(prev => {\r\n            const updatedItems = [...prev];\r\n            updatedItems.splice(existingIndex, 1);\r\n            return updatedItems;\r\n        });\r\n    } else {        \r\n        item.isSelected = true;\r\n        this.selectedItems.update(prev => [...prev, selectedItem]);\r\n    }    \r\n    \r\n    if(this.closeAfterSelect){\r\n      this.isOpen.set(false);\r\n    }\r\n    \r\n    const selectedItemsForNgModel = this.selectedItems().map(val => val[this.value]);\r\n    this.selected.emit(selectedItemsForNgModel);\r\n    this.onChange(selectedItemsForNgModel);\r\n    \r\n    this.flexiSelectInput!.nativeElement.select();\r\n  }\r\n\r\n  selectSingle(item:any){\r\n    this.clearAllSelected();\r\n    item.isSelected = true;\r\n    this.selectedItem.set(item);\r\n    if(this.closeAfterSelect){\r\n      this.isOpen.set(false);\r\n    }\r\n    this.selected.emit(item[this.value]);\r\n    this.onChange(item[this.value]);\r\n    this.flexiSelectInput!.nativeElement.select();\r\n  }\r\n\r\n  select(item: any) {\r\n    if(this.multiple){\r\n      this.selectForMultiple(item);\r\n    }else{\r\n      this.selectSingle(item);\r\n    }    \r\n  }\r\n\r\n  selectOption(option: FlexiOptionComponent) {\r\n    const selectedItem = {\r\n      [this.value]: option.value,\r\n      [this.label]: option.viewValue\r\n    };\r\n    this.select(selectedItem);\r\n  }\r\n\r\n  writeValue(value: any): void {    \r\n    if(value){\r\n      this.initialState = value;\r\n      this.selectInitialStateValue();\r\n    } else {\r\n      this.selectedItem.set({});\r\n      this.selectFirstOne();\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    // Implement if needed\r\n  }\r\n\r\n  removeSelectedItemFromSelectedItems(index: number, item: any){    \r\n    this.selectedItems.update(prev => {\r\n      const updatedItems = [...prev];\r\n      updatedItems.splice(index, 1);\r\n      return updatedItems;\r\n  });\r\n\r\n    const existingItem = this.data.find(p => p[this.value] === item[this.value]);\r\n    if(existingItem){\r\n      existingItem.isSelected = false;\r\n    }\r\n\r\n\r\n    const selectedItemsForNgModel = this.selectedItems().map(val => val[this.value]);\r\n    this.selected.emit(selectedItemsForNgModel);\r\n    this.onChange(selectedItemsForNgModel);\r\n    \r\n    this.isOpen.set(true);\r\n  }\r\n}\r\n","<div class=\"flexi-select\" [attr.data-bs-theme]=\"themeClass\">\r\n    <div class=\"flexi-select-div\" (click)=\"openOrClose()\" [ngStyle]=\"{'height': height}\">\r\n        @if(!multiple){\r\n            <span>\r\n                {{selectedItem()[label] === undefined ? selectOne : selectedItem()[label]}}\r\n            </span>\r\n        }@else {\r\n            <div class=\"flexi-select-multiple-container\">\r\n                @for(item of selectedItems();track item){\r\n                    <div class=\"flexi-select-multiple-value\">\r\n                        <span aria-hidden=\"true\" class=\"flexi-select-multiple-value-icon-left\" (click)=\"removeSelectedItemFromSelectedItems($index, item)\">×</span>\r\n                        <span class=\"flexi-select-multiple-value-label\">{{item[label]}}</span>\r\n                    </div>\r\n                }            \r\n            </div>\r\n        }\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" class=\"flexi-select-div-svg\">\r\n            <path\r\n                d=\"M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8H288c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z\" />\r\n        </svg>\r\n    </div>\r\n    <div class=\"flexi-select-dropdown\" [hidden]=\"!isOpen()\">\r\n        <input #flexiSelectInput class=\"flexi-select-search-input\" (input)=\"search()\" (keydown)=\"onKeyDown($event)\"\r\n            type=\"search\">\r\n        <ul class=\"flexi-select-ul\" (scroll)=\"onScroll($event)\">\r\n            @for(item of filteredData(); track $index){                \r\n                <li (click)=\"select(item)\" [class]=\"setLiClass(item)\">\r\n                    <span>{{item[label]}}</span>\r\n                </li>\r\n            }\r\n            @empty {\r\n            <li>\r\n                <span>{{noData}}</span>\r\n            </li>\r\n            }\r\n        </ul>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { FlexiSelectComponent } from './flexi-select.component';\r\nimport { FlexiOptionComponent } from './flexi-option.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    FlexiSelectComponent,\r\n    FlexiOptionComponent\r\n  ],\r\n  exports: [\r\n    FlexiSelectComponent,\r\n    FlexiOptionComponent\r\n  ]\r\n})\r\nexport class FlexiSelectModule { }\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}