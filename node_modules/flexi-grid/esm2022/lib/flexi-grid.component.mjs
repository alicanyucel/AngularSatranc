import { Component, ContentChildren, EventEmitter, HostListener, Input, Output, ViewChild, ViewEncapsulation, signal } from '@angular/core';
import { FlexiGridColumnComponent } from './flexi-grid-column.component';
import { StateFilterModel, StateModel } from './state.model';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/forms";
import * as i3 from "tr-currency";
export class FlexiGridComponent {
    constructor(cdr) {
        this.cdr = cdr;
        this.data = [];
        this.total = 0;
        this.pageable = false;
        this.pageSize = 10;
        this.showIndex = false;
        this.pageSizeList = [5, 10, 20, 30, 50, 100, 500, 1000];
        this.loading = false;
        this.sortable = false;
        this.themeClass = "light";
        this.height = "420px";
        this.filterable = false;
        this.captionTitle = "";
        this.showColumnVisibility = true;
        this.showRefreshData = true;
        this.dataBinding = false;
        this.showCaption = false;
        this.showExportExcel = false;
        this.autoHeight = false;
        this.minWidth = "1050px";
        this.useMinWidth = false;
        this.autoWidth = false;
        this.width = "100%";
        this.indexWidth = "70px";
        this.columnVisibilityBtnClass = "flexi-grid-btn";
        this.refreshDataBtnClass = "flexi-grid-btn";
        this.exportExcelBtnClass = "flexi-grid-btn";
        this.exportExcelFileName = "excel-export";
        this.footerPerPageText = "items per page";
        this.resizable = false;
        this.draggable = false;
        this.tbodyStyle = {};
        this.trMinHeight = "45px";
        this.pageNumberCount = signal(5);
        this.pageNumbers = signal([]);
        this.totalPageCount = signal(0);
        this.state = new StateModel();
        this.pagedData = signal([]);
        this.filterDropdownVisible = signal({});
        this.columnVisibilityDropdownVisible = signal(false);
        this.textFilterTypes = signal([
            { operator: "eq", value: 'Eşittir' },
            { operator: "ne", value: 'Eşit değildir' },
            { operator: "contains", value: 'İçerir' },
            { operator: "not contains", value: 'İçermez' },
            { operator: "startswith", value: 'İle başlar' },
            { operator: "endswith", value: 'İle biter' }
        ]);
        this.numberFilterTypes = signal([
            { operator: "eq", value: 'Eşittir' },
            { operator: "ne", value: 'Eşit değildir' },
            { operator: "gt", value: 'Daha büyüktür' },
            { operator: "ge", value: 'Daha büyüktür ya da eşittir' },
            { operator: "lt", value: 'Daha küçüktür' },
            { operator: "le", value: 'Daha küçüktür ya da eşittir' }
        ]);
        this.tempDraggable = false;
        this.dataStateChange = new EventEmitter();
        this.isShowMobileFilter = signal(false);
        this.onMouseMove = (event) => {
            if (this.resizingColumn) {
                const offset = event.pageX - this.startX;
                this.resizingColumn.width = this.startWidth + offset + 'px';
            }
        };
        this.onMouseUp = () => {
            this.resizingColumn = undefined;
            document.removeEventListener('mousemove', this.onMouseMove);
            document.removeEventListener('mouseup', this.onMouseUp);
            // Resize işlemi bittiğinde draggable durumunu geri yükle
            if (this.tempDraggable) {
                this.draggable = this.tempDraggable;
                this.tempDraggable = false;
            }
        };
    }
    ngOnChanges(changes) {
        // console.log("change is working...");
        if (this.data.length > 0) {
            if (!this.columns || this.columns.length === 0) {
                this.initializeColumnsFromData();
                this.cdr.detectChanges();
            }
        }
        if (this.pageSize !== this.state.pageSize) {
            this.state.pageSize = +this.pageSize;
        }
        if (this.pageable) {
            this.setPageNumbers();
            this.updatePagedData();
        }
        else {
            this.pagedData.set(this.data);
        }
    }
    ngAfterViewInit() {
        if (!this.columns || this.columns.length === 0) {
            this.initializeColumnsFromData();
            this.cdr.detectChanges();
        }
    }
    initializeColumnsFromData() {
        if (this.data && this.data.length > 0) {
            const firstItem = this.data[0];
            const columnsArray = Object.keys(firstItem).map(key => {
                const column = new FlexiGridColumnComponent();
                column.field = key;
                column.title = this.capitalizeFirstLetter(key);
                column.visible = true;
                column.hideOverflow = true;
                return column;
            });
            // Resetting columns with the newly created columns array
            if (this.columns) {
                this.columns.reset(columnsArray);
            }
        }
    }
    capitalizeFirstLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }
    changePage(pageNumber) {
        if (pageNumber > this.totalPageCount()) {
            pageNumber = this.totalPageCount();
        }
        else if (pageNumber < 1) {
            pageNumber = 1;
        }
        const previousPageNumber = this.state.pageNumber;
        this.state.pageNumber = +pageNumber;
        this.state.skip = (pageNumber - 1) * +this.state.pageSize;
        this.dataStateChange.emit(this.state);
        // Check if the page number crossed a 10-page boundary
        const previousGroup = Math.floor((previousPageNumber - 1) / this.pageNumberCount());
        const currentGroup = Math.floor((pageNumber - 1) / this.pageNumberCount());
        if (currentGroup > previousGroup) {
            this.nextPageGroup();
        }
        else if (currentGroup < previousGroup) {
            this.previousPageGroup();
        }
        else {
            this.setPageNumbers();
        }
        this.updatePagedData();
    }
    setPageNumbers() {
        const pageCount = Math.ceil(this.total / +this.state.pageSize);
        const numbers = [];
        // Calculate the current range of page numbers
        const currentGroup = Math.floor((this.state.pageNumber - 1) / this.pageNumberCount());
        const startPage = currentGroup * this.pageNumberCount() + 1;
        const endPage = Math.min(startPage + (this.pageNumberCount() - 1), pageCount);
        for (let i = startPage; i <= endPage; i++) {
            numbers.push(i);
        }
        this.pageNumbers.set(numbers);
        this.totalPageCount.set(pageCount);
    }
    nextPageGroup() {
        const pageCount = Math.ceil(this.total / +this.state.pageSize);
        const currentGroup = Math.floor((this.state.pageNumber - 1) / this.pageNumberCount());
        const nextGroupStartPage = (currentGroup) * this.pageNumberCount() + 1;
        if (nextGroupStartPage <= pageCount) {
            this.state.pageNumber = nextGroupStartPage;
        }
        this.setPageNumbers();
        this.updatePagedData();
    }
    previousPageGroup() {
        const currentGroup = Math.floor((this.state.pageNumber - 1) / this.pageNumberCount());
        const previousGroupStartPage = (currentGroup) * this.pageNumberCount() + 1;
        if (previousGroupStartPage > 0) {
            this.state.pageNumber = previousGroupStartPage;
        }
        this.setPageNumbers();
        this.updatePagedData();
    }
    changePageSize(event) {
        const value = +event.target.value;
        this.state.pageSize = value;
        this.state.pageNumber = 1;
        this.state.skip = 0;
        if (this.pageable && this.dataBinding) {
            this.dataStateChange.emit(this.state);
        }
        else {
            this.updatePagedData();
        }
    }
    updatePagedData() {
        let filteredData = this.data;
        if (!filteredData) {
            this.pagedData.set([]);
            return;
        }
        if (this.filterable && this.state.filter.length > 0 && !this.dataBinding) {
            const filters = this.state.filter.filter(p => p.value);
            filters.forEach(filter => {
                filteredData = filteredData.filter(item => {
                    const field = filter.field;
                    const value = filter.value;
                    const itemValue = item[field].toString().toLocaleLowerCase('tr');
                    const filterValue = value.toString().toLocaleLowerCase('tr');
                    switch (filter.operator) {
                        case 'eq':
                            return itemValue === filterValue;
                        case 'ne':
                            return itemValue !== filterValue;
                        case 'contains':
                            return itemValue.includes(filterValue);
                        case 'not contains':
                            return !itemValue.includes(filterValue);
                        case 'startswith':
                            return itemValue.startsWith(filterValue);
                        case 'endswith':
                            return itemValue.endsWith(filterValue);
                        case 'gt':
                            return parseFloat(itemValue) > parseFloat(filterValue);
                        case 'ge':
                            return parseFloat(itemValue) >= parseFloat(filterValue);
                        case 'lt':
                            return parseFloat(itemValue) < parseFloat(filterValue);
                        case 'le':
                            return parseFloat(itemValue) <= parseFloat(filterValue);
                        default:
                            return true;
                    }
                });
            });
        }
        // Order data if sortable is true
        if (this.sortable && this.state.sort.field && !this.dataBinding) {
            filteredData = filteredData.sort((a, b) => {
                const field = this.state.sort.field;
                const dir = this.state.sort.dir === 'asc' ? 1 : -1;
                if (a[field] < b[field])
                    return -1 * dir;
                if (a[field] > b[field])
                    return 1 * dir;
                return 0;
            });
        }
        if (!this.dataBinding) {
            this.total = filteredData.length;
            this.setPageNumbers();
        }
        // Pagination logic
        if (filteredData) {
            if (filteredData.length > +this.state.pageSize && !this.dataBinding && this.pageable) {
                const start = this.state.skip;
                const end = start + +this.state.pageSize;
                this.pagedData.set(filteredData.slice(start, end));
            }
            else {
                this.pagedData.set(filteredData);
            }
        }
    }
    sortData() {
        this.data = this.data.sort((a, b) => {
            const field = this.state.sort.field;
            const dir = this.state.sort.dir === 'asc' ? 1 : -1;
            if (a[field] < b[field])
                return -1 * dir;
            if (a[field] > b[field])
                return 1 * dir;
            return 0;
        });
        if (this.dataBinding) {
            this.dataStateChange.emit(this.state);
        }
        else {
            this.updatePagedData();
        }
    }
    sort(field) {
        this.state.sort.field = field;
        this.state.pageNumber = 1;
        if (this.state.sort.dir === "asc") {
            this.state.sort.dir = "desc";
        }
        else if (this.state.sort.dir === 'desc') {
            this.state.sort.dir = "";
            this.state.sort.field = '';
        }
        else {
            this.state.sort.dir = 'asc';
        }
        this.sortData();
    }
    toggleTheme() {
        this.themeClass = this.themeClass === 'light' ? 'dark' : 'light';
    }
    toggleFilterDropdown(field) {
        this.filterDropdownVisible()[field] = !this.filterDropdownVisible()[field];
    }
    applyFilter(column, operator) {
        this.filterDropdownVisible()[column.field] = false;
        column.filterOperator = operator;
        if (column.value !== "") {
            this.filter(column.field, operator, column.value, column.filterType);
        }
    }
    filter(field, operator, value, type) {
        if (this.timeoutId) {
            clearTimeout(this.timeoutId);
        }
        this.timeoutId = setTimeout(() => {
            if (value !== "") {
                this.state.pageNumber = 1;
                this.state.skip = 0;
                let filterField = this.state.filter.find(p => p.field === field);
                if (filterField) {
                    filterField.value = value;
                    filterField.operator = operator;
                }
                else {
                    filterField = new StateFilterModel();
                    filterField.field = field;
                    filterField.operator = operator;
                    filterField.value = value;
                    filterField.type = type;
                    this.state.filter.push(filterField);
                }
            }
            else {
                const findIndex = this.state.filter.findIndex(p => p.field === field);
                if (findIndex > -1) {
                    this.state.filter.splice(findIndex, 1);
                }
            }
            if (this.dataBinding) {
                this.dataStateChange.emit(this.state);
            }
            else {
                this.updatePagedData();
            }
        }, this.dataBinding ? 500 : 1);
    }
    showClearFilter(value) {
        if (value)
            return true;
        return false;
    }
    clearFilter(field) {
        this.filter(field, "contains", "", "text");
        const column = this.columns?.find(p => p.field === field);
        if (column) {
            column.value = "";
        }
        if (this.dataBinding) {
        }
        else {
            this.updatePagedData();
        }
    }
    toggleColumnVisibilityDropdown() {
        this.columnVisibilityDropdownVisible.set(!this.columnVisibilityDropdownVisible());
    }
    refreshDataMethod() {
        this.state = new StateModel();
        this.state.pageSize = this.pageSize;
        this.columns?.forEach(val => {
            val.value = "";
        });
        this.dataStateChange.emit(this.state);
    }
    closeAllDropdowns() {
        for (let i in this.filterDropdownVisible()) {
            this.filterDropdownVisible()[i] = false;
        }
    }
    handleClick(event) {
        const target = event.target;
        if (!target.closest('.dropdown-menu') && !target.closest('.svg')) {
            this.closeAllDropdowns();
        }
        if (!target.closest('.dropdown-menu') && !target.closest('button')) {
            this.columnVisibilityDropdownVisible.set(false);
        }
    }
    onExportExcelButtonClick() {
        if (this.exportExcelButtonClick) {
            this.exportExcelButtonClick();
        }
        else {
            this.exportExcel();
        }
    }
    exportExcel() {
        const visibleColumns = this.columns?.filter(column => column.visible).map(column => {
            return { field: column.field, title: column.title || column.field };
        }) || [];
        let csvData = visibleColumns.map(col => col.title).join(',') + '\n';
        let exportData = this.data;
        exportData.forEach(row => {
            let rowData = visibleColumns.map(col => {
                // Hücre içeriğindeki virgüller ve çift tırnakları kaçış karakteri ile değiştir
                const cellData = row[col.field] ? row[col.field].toString().replace(/"/g, '""') : '';
                return `"${cellData}"`;
            }).join(',');
            csvData += rowData + '\n';
        });
        const blob = new Blob([csvData], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.setAttribute('hidden', '');
        a.setAttribute('href', url);
        a.setAttribute('download', this.exportExcelFileName + '.csv');
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }
    onMouseDown(event, column) {
        this.resizingColumn = column;
        this.startX = event.pageX;
        this.startWidth = event.target.parentElement.offsetWidth;
        // Eğer draggable ise, geçici olarak devre dışı bırak
        if (this.draggable) {
            this.tempDraggable = this.draggable;
            this.draggable = false;
        }
        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);
    }
    onDragStart(event, index) {
        this.draggedColumnIndex = index;
    }
    onDragOver(event, index) {
        event.preventDefault();
    }
    onDrop(event, index) {
        event.preventDefault();
        if (this.draggedColumnIndex === undefined)
            return;
        const draggedColumn = this.columns?.toArray()[this.draggedColumnIndex];
        const targetColumn = this.columns?.toArray()[index];
        if (draggedColumn && targetColumn) {
            const columnsArray = this.columns?.toArray();
            // Remove dragged column and insert it at the new position
            columnsArray.splice(this.draggedColumnIndex, 1);
            columnsArray.splice(index, 0, draggedColumn);
            this.columns?.reset(columnsArray);
        }
        this.draggedColumnIndex = undefined;
    }
    getFieldValue(item, field) {
        if (!field.includes(".")) {
            return item[field];
        }
        else {
            const fields = field.split(".");
            if (fields.length === 2) {
                return item[fields[0]][fields[1]];
            }
            else {
                console.log("Value not found!");
                return "";
            }
        }
    }
    openMobileFilter() {
        this.flexiGridFilterTr.nativeElement.classList.add("show");
        this.isShowMobileFilter.set(true);
    }
    closeMobileFilter() {
        this.flexiGridFilterTr.nativeElement.classList.remove("show");
        this.isShowMobileFilter.set(false);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.6", ngImport: i0, type: FlexiGridComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.0.6", type: FlexiGridComponent, selector: "flexi-grid", inputs: { data: "data", total: "total", pageable: "pageable", pageSize: "pageSize", showIndex: "showIndex", pageSizeList: "pageSizeList", loading: "loading", sortable: "sortable", themeClass: "themeClass", height: "height", filterable: "filterable", captionTitle: "captionTitle", captionTemplate: "captionTemplate", footerTemplate: "footerTemplate", showColumnVisibility: "showColumnVisibility", showRefreshData: "showRefreshData", dataBinding: "dataBinding", showCaption: "showCaption", showExportExcel: "showExportExcel", autoHeight: "autoHeight", minWidth: "minWidth", useMinWidth: "useMinWidth", autoWidth: "autoWidth", width: "width", indexWidth: "indexWidth", columnVisibilityBtnClass: "columnVisibilityBtnClass", refreshDataBtnClass: "refreshDataBtnClass", exportExcelBtnClass: "exportExcelBtnClass", exportExcelFileName: "exportExcelFileName", exportExcelButtonClick: "exportExcelButtonClick", footerPerPageText: "footerPerPageText", resizable: "resizable", draggable: "draggable", tbodyStyle: "tbodyStyle", trMinHeight: "trMinHeight" }, outputs: { dataStateChange: "dataStateChange" }, host: { listeners: { "document:click": "handleClick($event)", "document:mousemove": "onMouseMove($event)", "document:mouseup": "onMouseUp()" } }, queries: [{ propertyName: "columns", predicate: FlexiGridColumnComponent }], viewQueries: [{ propertyName: "table", first: true, predicate: ["table"], descendants: true }, { propertyName: "flexiGridFilterTr", first: true, predicate: ["flexiGridFilterTr"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<title>Angular Flexi Grid</title>\r\n<div [attr.data-bs-theme]=\"themeClass\" class=\"flexi-grid-table-container overflow-x\" [ngStyle]=\"{'width': autoWidth ? '100%' : width}\">\r\n  @if(showCaption){\r\n    <div class=\"flexi-grid-caption-div\">\r\n      <h3>{{captionTitle}}</h3>\r\n      <div class=\"d-flex\" style=\"gap: 10px;\">      \r\n        <ng-container *ngTemplateOutlet=\"captionTemplate\"></ng-container>\r\n        @if(showExportExcel){\r\n          <button [ngClass]=\"exportExcelBtnClass\" (click)=\"onExportExcelButtonClick()\">\r\n            <svg style=\"width: 13px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM155.7 250.2L192 302.1l36.3-51.9c7.6-10.9 22.6-13.5 33.4-5.9s13.5 22.6 5.9 33.4L221.3 344l46.4 66.2c7.6 10.9 5 25.8-5.9 33.4s-25.8 5-33.4-5.9L192 385.8l-36.3 51.9c-7.6 10.9-22.6 13.5-33.4 5.9s-13.5-22.6-5.9-33.4L162.7 344l-46.4-66.2c-7.6-10.9-5-25.8 5.9-33.4s25.8-5 33.4 5.9z\"/></svg>\r\n          </button>\r\n        }\r\n        @if(showColumnVisibility){\r\n          <button [ngClass]=\"columnVisibilityBtnClass\" title=\"Column Visibility\" (click)=\"toggleColumnVisibilityDropdown()\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"cursor\" style=\"width: 15px;\" viewBox=\"0 0 512 512\"><path d=\"M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z\"/></svg>\r\n            <div class=\"flexi-grid-dropdown-menu\" [class.show]=\"columnVisibilityDropdownVisible()\">\r\n              <p class=\"flexi-grid-dropdown-title\">Column Visibility</p>\r\n              @for(column of columns; track $index){\r\n                <label class=\"flexi-grid-dropdown-checkbox-item\" [for]=\"column.field\">\r\n                  <input [(ngModel)]=\"column.visible\" [id]=\"column.field\" type=\"checkbox\">\r\n                  {{ column.title ? column.title : column.field }}\r\n                </label>                    \r\n              }                    \r\n            </div>\r\n          </button>\r\n        }\r\n        @if(showRefreshData && dataBinding){\r\n          <button [ngClass]=\"refreshDataBtnClass\" (click)=\"refreshDataMethod()\">\r\n            <svg style=\"width: 13px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z\"/></svg>\r\n          </button>\r\n        }\r\n        <div style=\"margin-right: 10px;\"></div>\r\n      </div>\r\n    </div>\r\n  }\r\n <table [ngStyle]=\"{'min-width': !useMinWidth ? '100%' : minWidth}\">\r\n   <thead>     \r\n     <tr>\r\n       @if(showIndex){\r\n         <th [ngStyle]=\"{'width': indexWidth}\">#</th>\r\n       }\r\n       @for(column of columns; track $index){          \r\n         @if(sortable && column.sortable && column.field && data.length > 0){\r\n           <th [ngStyle]=\"{'width': column.width}\" class=\"cursor flexi-grid-border\" [hidden]=\"!column.visible\"\r\n               [draggable]=\"(draggable && column.draggable)\"\r\n               (dragstart)=\"onDragStart($event, $index)\" \r\n               (dragover)=\"onDragOver($event, $index)\" \r\n               (drop)=\"onDrop($event, $index)\">\r\n             @if(resizable && column.resizable){\r\n               <div class=\"flexi-grid-resize-handle\" (mousedown)=\"onMouseDown($event, column)\"></div>\r\n             }\r\n             <div (click)=\"sort(column.field)\">\r\n               <span>{{ column.title ? column.title : column.field }}</span>\r\n               <span class=\"ms-2\">\r\n                 @if(this.state.sort.field === column.field){\r\n                   <span *ngIf=\"state.sort.field === column.field\">\r\n                     {{ state.sort.dir === 'asc' ? '\u2191' : '\u2193' }}\r\n                   </span>\r\n                 }\r\n               </span>\r\n             </div>              \r\n           </th>\r\n         }@else {\r\n           <th \r\n             [draggable]=\"(draggable && column.draggable)\" \r\n             [ngStyle]=\"{'width': column.width}\" \r\n             class=\"flexi-grid-border\" \r\n             [hidden]=\"!column.visible\"\r\n             (dragstart)=\"onDragStart($event, $index)\" \r\n             (dragover)=\"onDragOver($event, $index)\" \r\n             (drop)=\"onDrop($event, $index)\">\r\n             @if(resizable && column.resizable){\r\n               <div class=\"flexi-grid-resize-handle\" (mousedown)=\"onMouseDown($event, column)\"></div>\r\n             }\r\n             <div>\r\n               <span>{{ column.title ? column.title : column.field }}</span>\r\n             </div>\r\n           </th>\r\n         }\r\n       }\r\n     </tr> \r\n     @if(filterable){\r\n      <tr class=\"flexi-grid-mobile-filter-tr\">\r\n        <th colSpan=\"2\">\r\n          @if(isShowMobileFilter()){\r\n            <button class=\"flexi-grid-btn\" (click)=\"closeMobileFilter()\">              \r\n              <svg class=\"svg-mobile cursor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M3.9 22.9C10.5 8.9 24.5 0 40 0H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L396.4 195.6C316.2 212.1 256 283 256 368c0 27.4 6.3 53.4 17.5 76.5c-1.6-.8-3.2-1.8-4.7-2.9l-64-48c-8.1-6-12.8-15.5-12.8-25.6V288.9L9 65.3C-.7 53.4-2.8 36.8 3.9 22.9zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm59.3 107.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L432 345.4l-36.7-36.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L409.4 368l-36.7 36.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L432 390.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L454.6 368l36.7-36.7z\"/></svg>\r\n              Filtreyi Kapat\r\n            </button>\r\n          }@else {\r\n            <button class=\"flexi-grid-btn\" (click)=\"openMobileFilter()\">\r\n              <svg class=\"svg-mobile cursor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"/></svg>\r\n              Filtreyi A\u00E7\r\n            </button>\r\n          }\r\n        </th>\r\n      </tr>\r\n      <tr class=\"flexi-grid-filter-tr\" #flexiGridFilterTr>\r\n        @if(showIndex && !isShowMobileFilter()){\r\n          <th class=\"flexi-grid-filter-th\" [ngStyle]=\"{'width': indexWidth}\"></th>\r\n        }\r\n        @for(column of columns; track $index){          \r\n          @if(column.filterable && column.field){            \r\n            <th class=\"flexi-grid-filter-th\" [hidden]=\"!column.visible\" [attr.data-label]=\"column.title ? column.title : column.field\">\r\n              <div class=\"d-flex flexi-grid-filter-container\">\r\n                @if(column.filterType === \"text\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"text\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                  @if(!column.value){\r\n                    <svg class=\"svg cursor show-filter\" (click)=\"toggleFilterDropdown(column.field)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"/></svg>\r\n                    <div class=\"flexi-grid-dropdown-menu\" [class.show]=\"filterDropdownVisible()[column.field]\">\r\n                      @for(filterType of textFilterTypes(); track filterType.operator){\r\n                        <a class=\"flexi-grid-dropdown-item\" [ngClass]=\"column.filterOperator === filterType.operator ? 'flexi-grid-active' : ''\" (click)=\"applyFilter(column, filterType.operator)\">\r\n                          {{ filterType.value }}\r\n                        </a>\r\n                      }                    \r\n                    </div>\r\n                  }\r\n                }@else if(column.filterType === \"date\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"date\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                }@else if(column.filterType === \"date-time\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"datetime-local\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                }@else if(column.filterType === \"number\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"number\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                  @if(!column.value){\r\n                    <svg class=\"svg cursor show-filter\" (click)=\"toggleFilterDropdown(column.field)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"/></svg>\r\n                    <div class=\"flexi-grid-dropdown-menu\" [class.show]=\"filterDropdownVisible()[column.field]\">\r\n                      @for(filterType of numberFilterTypes(); track filterType.operator){\r\n                        <a class=\"flexi-grid-dropdown-item\" [ngClass]=\"column.filterOperator === filterType.operator ? 'flexi-grid-active' : ''\" (click)=\"applyFilter(column, filterType.operator)\">\r\n                          {{ filterType.value }}\r\n                        </a>\r\n                      }                    \r\n                    </div>\r\n                  }\r\n                }\r\n                \r\n                @if(showClearFilter(column.value)){\r\n                  <svg (click)=\"clearFilter(column.field)\" class=\"svg cursor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M3.9 22.9C10.5 8.9 24.5 0 40 0H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L396.4 195.6C316.2 212.1 256 283 256 368c0 27.4 6.3 53.4 17.5 76.5c-1.6-.8-3.2-1.8-4.7-2.9l-64-48c-8.1-6-12.8-15.5-12.8-25.6V288.9L9 65.3C-.7 53.4-2.8 36.8 3.9 22.9zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm59.3 107.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L432 345.4l-36.7-36.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L409.4 368l-36.7 36.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L432 390.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L454.6 368l36.7-36.7z\"/></svg>\r\n                }\r\n              </div>\r\n            </th>\r\n          }@else {\r\n            @if(!isShowMobileFilter()){\r\n              <th [hidden]=\"!column.visible\"></th>\r\n            }\r\n          }\r\n        }\r\n      </tr>\r\n    }    \r\n   </thead>\r\n   <tbody class=\"relative\" [ngStyle]=\"{'height': autoHeight ? '100%' : height}\" style=\"min-height: 100px;\" [ngStyle]=\"tbodyStyle\">\r\n     @if(loading){        \r\n       <div class=\"flexi-grid-spinner-container\">\r\n         <div class=\"flexi-grid-spinner-1\"></div>\r\n         <div class=\"flexi-grid-spinner-2\"></div>\r\n       </div>\r\n     }\r\n     @if(data.length > 0){      \r\n       @for(item of pagedData(); track $index; let i = $index){\r\n         <tr [ngStyle]=\"{'min-height': trMinHeight}\">\r\n           @if(showIndex){\r\n             @if(!pageable){\r\n               <td class=\"flexi-grid-index-td\" [ngStyle]=\"{'width': indexWidth}\" [attr.data-label]=\"'#'\">{{($index + 1)}}</td>\r\n             }\r\n             @else{\r\n               <td class=\"flexi-grid-index-td\" [ngStyle]=\"{'width': indexWidth}\" [attr.data-label]=\"'#'\">{{($index + ((state.pageNumber -1) * +state.pageSize)) + 1}}</td>\r\n             }\r\n           }\r\n           @for(column of columns; track $index){\r\n             @if(column.columnTemplate && column.visible){\r\n               <td [ngStyle]=\"{'width': column.width, 'text-align': column.textAlign}\" [ngClass]=\"column.className\" [attr.data-label]=\"column.title ? column.title : column.field\">\r\n                 <ng-container *ngTemplateOutlet=\"column.columnTemplate; context: {value: item[column.field], item: item, index: i}\"></ng-container>\r\n               </td>\r\n             }@else {\r\n               <td [ngStyle]=\"{'width': column.width, 'text-align': column.textAlign}\" [hidden]=\"!column.visible\" [ngClass]=\"column.className\" [ngClass]=\"column.hideOverflow ? 'text-overflow-hidden' : ''\" [attr.data-label]=\"column.title ? column.title : column.field\" [title]=\"item ? getFieldValue(item, column.field) : ''\">\r\n                 @if(column.field){\r\n                   @if((column.filterType === \"date\" || column.filterType === \"date-time\") && column.filterType){\r\n                     {{ getFieldValue(item, column.field) | date: column.format! }}\r\n                   }@else if(column.filterType === \"number\" && column.filterType){\r\n                     @if(column.format === \"n\" || column.format === null){\r\n                       {{ (getFieldValue(item, column.field) | trCurrency: \"\": true: column.fraction) }}\r\n                     }@else if(column.format === \"c\"){\r\n                       {{ (getFieldValue(item, column.field) | trCurrency : column.symbol: column.showSymbolInFront: column.fraction) }}\r\n                     }                    \r\n                   }\r\n                   @else {\r\n                     {{ getFieldValue(item, column.field) }}\r\n                   }\r\n                 }\r\n               </td>\r\n             }            \r\n           }\r\n         </tr>\r\n       }\r\n     }@else {\r\n       @if(!loading){\r\n         <tr style=\"height: 100%;\" [ngStyle]=\"{'min-height': trMinHeight}\">\r\n           <td style=\"text-align: center;\" [colSpan]=\"columns?.length\">\r\n             <h4>G\u00F6sterilecek veri bulunamad\u0131!</h4>\r\n           </td>\r\n         </tr>\r\n       }\r\n     }\r\n   </tbody>\r\n   <tfoot>\r\n     <ng-container *ngTemplateOutlet=\"footerTemplate\" class=\"overflow-x\"></ng-container>     \r\n   </tfoot>\r\n </table>\r\n  @if(pageable){\r\n    <div class=\"flexi-grid-pagination-container\">\r\n      @if(!isShowMobileFilter()){\r\n        <div class=\"flexi-grid-pagination-part-one\">\r\n          <select class=\"flexi-grid-pagesize-select\" [ngModel]=\"state.pageSize\" (change)=\"changePageSize($event)\">\r\n            @for(size of pageSizeList; track size){\r\n            <option>{{size}}</option>\r\n            }\r\n          </select>\r\n        </div>\r\n        <div class=\"flexi-grid-pagination-part-two\">\r\n          <ul class=\"flexi-grid-pagination\">\r\n            @if(this.pageNumbers().length > 1){              \r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === 1 ? 'disabled': ''\" (click)=\"changePage(1)\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Previous\">\r\n                  <span aria-hidden=\"true\">&laquo;</span>\r\n                </a>\r\n              </li>\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === 1 ? 'disabled': ''\"\r\n                (click)=\"changePage(state.pageNumber - 1)\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Previous\">\r\n                  <span aria-hidden=\"true\">&#8249;</span>\r\n                </a>\r\n              </li>\r\n              @if(pageNumbers()[0] !== 1){\r\n              <li class=\"flexi-grid-page-item\" (click)=\"previousPageGroup()\">\r\n                <a class=\"flexi-grid-page-link\">...</a>\r\n              </li>\r\n              }\r\n              @for(pageNumber of pageNumbers(); track pageNumber){\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === pageNumber ? 'flexi-grid-active': ''\">\r\n                <a (click)=\"changePage(pageNumber)\" class=\"flexi-grid-page-link\">\r\n                  {{pageNumber}}\r\n                </a>\r\n              </li>\r\n              }\r\n              @if(pageNumbers()[pageNumbers().length - 1] !== totalPageCount()){\r\n              <li class=\"flexi-grid-page-item\" (click)=\"nextPageGroup()\">\r\n                <a class=\"flexi-grid-page-link\">...</a>\r\n              </li>\r\n              }\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === totalPageCount() ? 'disabled': ''\"\r\n                (click)=\"changePage(state.pageNumber + 1)\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Next\">\r\n                  <span aria-hidden=\"true\">&#8250;</span>\r\n                </a>\r\n              </li>\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === totalPageCount() ? 'disabled': ''\"\r\n                (click)=\"changePage(totalPageCount())\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Next\">\r\n                  <span aria-hidden=\"true\">&raquo;</span>\r\n                </a>\r\n              </li>\r\n            }\r\n          </ul>        \r\n        </div>\r\n      }\r\n      <div class=\"flexi-grid-pagination-part-third\">\r\n        <span> \r\n            {{state.pageNumber}} - {{totalPageCount()}} of {{(total | currency: '': '': '1.0')!.replace(',','.')}} items \r\n        </span>\r\n      </div>\r\n    </div>\r\n  }\r\n</div>", styles: ["@import\"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\";[data-bs-theme=light]{--background-color: #f8f9fa;--background-color-part: #fff;--bg-color-gray: #f8f9fa;--text-color: #000;--text-hover-color: #212529;--active-text-color: #212529;--active-background-color: #ebf5ff;--tbody-hover: #f1f1f1;--hover-background-color: #ebf5ff;--hover-text-color: #212529;--border-color: #dee2e6}[data-bs-theme=dark]{--background-color: #212529;--background-color-part: #141414;--bg-color-gray: #000;--text-color: #fff;--text-hover-color: #000;--tbody-hover: #353232;--active-text-color: #141414;--active-background-color: #f8f9fa;--hover-background-color: #f8f9fa;--hover-text-color: #212529;--border-color: #141414}input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}svg{fill:var(--text-color)}a{cursor:pointer;-webkit-user-select:none;user-select:none;text-decoration:none!important}.flexi-grid-page-size-select{margin-left:20px}.relative{position:relative}.cursor{cursor:pointer}.flexi-grid-spinner-container{position:absolute;z-index:1;width:100%;background-color:#55536d1a;height:100%;display:flex;justify-content:center;align-items:center}.flexi-grid-spinner-1{position:absolute;height:60px;width:60px;border:3px solid;top:auto;border-radius:50%;border-left-color:transparent;border-right-color:transparent;animation:flexi-grid-spin-1 .8s linear infinite;background-color:transparent}.flexi-grid-spinner-2{position:absolute;height:30px;width:30px;top:auto;border:3px solid;border-radius:50%;border-top-color:transparent;border-bottom-color:transparent;animation:flexi-grid-spin-2 1.3s linear infinite;background-color:transparent}@keyframes flexi-grid-spin-1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes flexi-grid-spin-2{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}.flexi-grid-pagination-container{background-color:var(--background-color);padding:20px;display:flex;justify-content:space-between;align-items:center;overflow-x:auto}@media screen and (max-width: 1350px){.flexi-grid-pagination-container,.flexi-grid-pagination-td{flex-direction:column;gap:10px}.flexi-grid-pagination-div{flex-direction:column}}.flexi-grid-pagination{display:flex;list-style:none;overflow-x:auto;margin:0;padding:0}.flexi-grid-pagination a{color:var(--text-color)}.svg{width:30px;margin-left:3px;padding:5px;border:1px solid #ccc}.svg:hover{background-color:#0000001a}.d-flex{display:flex;align-items:center}.flexi-grid-table-container{border:1px solid var(--border-color);border-radius:12px;overflow-x:auto;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;background-color:var(--background-color-part);color:var(--text-color)}.flexi-grid-table-container table{caption-side:top;background-color:var(--background-color-part)}.flexi-grid-table-container caption{caption-side:top;padding:10px;background-color:var(--bg-color-gray);text-align:left;font-weight:700;border-bottom:1px solid var(--border-color)}.flexi-grid-table-container table{width:99.99%;border-collapse:collapse;overflow:auto;position:relative}.flexi-grid-table-container tbody::-webkit-scrollbar{display:none!important;width:12px}.flexi-grid-table-container tbody::-webkit-scrollbar-track{background:var(--background-color-part)}.flexi-grid-table-container tbody::-webkit-scrollbar-thumb{background-color:var(--text-color);border-radius:20px;border:3px solid var(--background-color-part)}.flexi-grid-table-container th,.flexi-grid-table-container td{padding-left:10px;padding-right:10px;text-align:left;border-bottom:1px solid var(--border-color)}.flexi-grid-border{position:relative;padding-right:10px}.flexi-grid-table-container td,.flexi-grid-filter-th,.flexi-grid-table-container th{border-right:1px solid var(--border-color);overflow-wrap:anywhere}.flexi-grid-border:last-child:after{display:none}.flexi-grid-table-container tfoot td{border-right:0px}.flexi-grid-table-container th{background-color:var(--background-color);padding-top:20px;padding-bottom:15px;position:sticky;top:0;z-index:1}.flexi-grid-table-container th{-webkit-user-select:none;user-select:none}.flexi-grid-table-container tbody tr:nth-child(odd){background-color:var(--background-color)}.flexi-grid-table-container tbody tr:hover{background-color:var(--tbody-hover)}.flexi-grid-table-container tbody{flex:1;overflow:auto;display:block}.flexi-grid-table-container tbody tr{display:table;width:100%;table-layout:fixed}.flexi-grid-table-container thead,.flexi-grid-table-container tfoot{display:table;width:calc(100% - 12px);width:100%;table-layout:fixed;z-index:1}.flexi-grid-filter-input{width:80%;padding:5px;border:1px solid #ced4da;border-radius:3px;background-color:var(--background-color-part);color:var(--text-color)}.flexi-grid-select-container{display:flex;align-items:center;margin-top:10px}.flexi-grid-select-container select{margin-right:10px}div .flexi-grid-active{background-color:var(--active-background-color)!important;color:var(--active-text-color)!important}.flexi-grid-active>.flexi-grid-page-link{background-color:var(--active-background-color);color:var(--active-text-color)!important}.flexi-grid-active{z-index:3;color:var(--active-text-color)!important;border-color:var(--active-background-color)!important}.flexi-grid-active a{color:var(--active-text-color)}.flexi-grid-page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#886ab5;background-color:var(--background-color-part);border:1px solid var(--border-color);border-radius:3px}.flexi-grid-page-link:hover{background-color:var(--hover-background-color)!important;color:var(--hover-text-color)!important}.flexi-grid-pagination .flexi-grid-page-item.disabled{cursor:not-allowed;opacity:.5;pointer-events:none}.flexi-grid-pagesize-select{margin-left:5px;padding:5px}.flexi-grid-filter-container{position:relative}.flexi-grid-dropdown-menu{display:none;position:absolute;top:100%;right:0;z-index:1000;float:left;min-width:160px;padding:5px 0;margin:0;font-size:14px;color:var(--text-color);text-align:left;list-style:none;background-color:var(--background-color);background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;box-shadow:0 .5rem 1rem #0000002d}.flexi-grid-dropdown-menu.show{display:block}.flexi-grid-dropdown-item{display:block;padding:3px 1.5rem;clear:both;font-weight:400;color:var(--text-color);text-align:inherit;background-color:transparent;border:0}.flexi-grid-dropdown-item:hover,.flexi-grid-dropdown-item:focus{color:var(--text-hover-color)!important;text-decoration:none;background-color:var(--hover-background-color)}.flexi-grid-dropdown-checkbox-item{padding:5px;display:flex;align-items:center;gap:3px}.flexi-grid-dropdown-checkbox-item:hover{color:var(--text-hover-color)!important;text-decoration:none;background-color:var(--hover-background-color);color:var(--hover-text-color);border-radius:5px}.flexi-grid-dropdown-title{text-align:center;padding-bottom:10px;border-bottom:1px solid (var(--border-color))}.flexi-grid-btn{box-shadow:0 1px rgba(var(--tblr-body-color-rgb),.04);display:inline-block;padding:.4075rem 1rem;font-family:-apple-system,BlinkMacSystemFont,San Francisco,Segoe UI,Roboto,Helvetica Neue,sans-serif;font-size:.875rem;font-weight:500;line-height:1.5;color:var(--text-color);text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid #ccc;border-radius:4px;background-color:var(--background-color);box-shadow:inset 0 1px #ffffff26,0 1px 1px #00000013;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.flexi-grid-btn:hover{border-color:#000}.overflow-x{overflow-x:auto}.flexi-grid-resize-handle{position:absolute;right:0;top:0;height:100%;width:5px;cursor:col-resize;z-index:1}.text-overflow-hidden{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.flexi-grid-caption-div{position:relative;display:flex;justify-content:space-between;align-items:center;width:100%;box-sizing:border-box;background-color:var(--bg-color-gray);padding:15px;border-bottom:1px solid var(--border-color)}.flexi-grid-mobile-filter-tr{display:none!important}.flexi-grid-mobile-filter-tr th{display:flex!important;width:100%;justify-content:center}.svg-mobile{width:20px}@media (max-width: 1000px){.show-filter{display:none}.flexi-grid-table-container{overflow-x:auto;width:100%;margin:0;padding:0;box-shadow:none;border:none}.flexi-grid-table-container table,.flexi-grid-table-container thead,.flexi-grid-table-container tbody,.flexi-grid-table-container th,.flexi-grid-table-container td,.flexi-grid-table-container tr{display:block}.flexi-grid-table-container thead tr{display:none}.flexi-grid-table-container tbody tr{margin-bottom:15px;border-bottom:2px solid var(--border-color)}.flexi-grid-table-container td,.flexi-grid-filter-tr .flexi-grid-filter-th{text-align:left;padding-left:50%;position:relative}.flexi-grid-filter-tr{background:#00000080!important}.flexi-grid-index-td{width:100%!important}.flexi-grid-table-container td:before,.flexi-grid-filter-tr .flexi-grid-filter-th:before{content:attr(data-label);position:absolute;left:10px;width:45%;padding-right:10px;white-space:nowrap;text-align:left;font-weight:700}.flexi-grid-table-container td{width:100%!important}.flexi-grid-mobile-filter-tr{display:block!important}.flexi-grid-filter-tr{position:absolute;width:100%;height:100%;background-color:#0000001a;z-index:999}.flexi-grid-filter-tr.show{display:block!important}.flexi-grid-table-container td:last-child{border-bottom:0}.flexi-grid-caption-div{flex-direction:column;align-items:center}.flexi-grid-pagination{font-size:10px}}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i1.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "directive", type: i2.NgSelectOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i2.ɵNgSelectMultipleOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i2.NumberValueAccessor, selector: "input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]" }, { kind: "directive", type: i2.CheckboxControlValueAccessor, selector: "input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]" }, { kind: "directive", type: i2.SelectControlValueAccessor, selector: "select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]", inputs: ["compareWith"] }, { kind: "directive", type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i2.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "pipe", type: i1.CurrencyPipe, name: "currency" }, { kind: "pipe", type: i1.DatePipe, name: "date" }, { kind: "pipe", type: i3.TrCurrencyPipe, name: "trCurrency" }], encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.6", ngImport: i0, type: FlexiGridComponent, decorators: [{
            type: Component,
            args: [{ selector: 'flexi-grid', encapsulation: ViewEncapsulation.None, template: "<title>Angular Flexi Grid</title>\r\n<div [attr.data-bs-theme]=\"themeClass\" class=\"flexi-grid-table-container overflow-x\" [ngStyle]=\"{'width': autoWidth ? '100%' : width}\">\r\n  @if(showCaption){\r\n    <div class=\"flexi-grid-caption-div\">\r\n      <h3>{{captionTitle}}</h3>\r\n      <div class=\"d-flex\" style=\"gap: 10px;\">      \r\n        <ng-container *ngTemplateOutlet=\"captionTemplate\"></ng-container>\r\n        @if(showExportExcel){\r\n          <button [ngClass]=\"exportExcelBtnClass\" (click)=\"onExportExcelButtonClick()\">\r\n            <svg style=\"width: 13px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM155.7 250.2L192 302.1l36.3-51.9c7.6-10.9 22.6-13.5 33.4-5.9s13.5 22.6 5.9 33.4L221.3 344l46.4 66.2c7.6 10.9 5 25.8-5.9 33.4s-25.8 5-33.4-5.9L192 385.8l-36.3 51.9c-7.6 10.9-22.6 13.5-33.4 5.9s-13.5-22.6-5.9-33.4L162.7 344l-46.4-66.2c-7.6-10.9-5-25.8 5.9-33.4s25.8-5 33.4 5.9z\"/></svg>\r\n          </button>\r\n        }\r\n        @if(showColumnVisibility){\r\n          <button [ngClass]=\"columnVisibilityBtnClass\" title=\"Column Visibility\" (click)=\"toggleColumnVisibilityDropdown()\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"cursor\" style=\"width: 15px;\" viewBox=\"0 0 512 512\"><path d=\"M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z\"/></svg>\r\n            <div class=\"flexi-grid-dropdown-menu\" [class.show]=\"columnVisibilityDropdownVisible()\">\r\n              <p class=\"flexi-grid-dropdown-title\">Column Visibility</p>\r\n              @for(column of columns; track $index){\r\n                <label class=\"flexi-grid-dropdown-checkbox-item\" [for]=\"column.field\">\r\n                  <input [(ngModel)]=\"column.visible\" [id]=\"column.field\" type=\"checkbox\">\r\n                  {{ column.title ? column.title : column.field }}\r\n                </label>                    \r\n              }                    \r\n            </div>\r\n          </button>\r\n        }\r\n        @if(showRefreshData && dataBinding){\r\n          <button [ngClass]=\"refreshDataBtnClass\" (click)=\"refreshDataMethod()\">\r\n            <svg style=\"width: 13px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z\"/></svg>\r\n          </button>\r\n        }\r\n        <div style=\"margin-right: 10px;\"></div>\r\n      </div>\r\n    </div>\r\n  }\r\n <table [ngStyle]=\"{'min-width': !useMinWidth ? '100%' : minWidth}\">\r\n   <thead>     \r\n     <tr>\r\n       @if(showIndex){\r\n         <th [ngStyle]=\"{'width': indexWidth}\">#</th>\r\n       }\r\n       @for(column of columns; track $index){          \r\n         @if(sortable && column.sortable && column.field && data.length > 0){\r\n           <th [ngStyle]=\"{'width': column.width}\" class=\"cursor flexi-grid-border\" [hidden]=\"!column.visible\"\r\n               [draggable]=\"(draggable && column.draggable)\"\r\n               (dragstart)=\"onDragStart($event, $index)\" \r\n               (dragover)=\"onDragOver($event, $index)\" \r\n               (drop)=\"onDrop($event, $index)\">\r\n             @if(resizable && column.resizable){\r\n               <div class=\"flexi-grid-resize-handle\" (mousedown)=\"onMouseDown($event, column)\"></div>\r\n             }\r\n             <div (click)=\"sort(column.field)\">\r\n               <span>{{ column.title ? column.title : column.field }}</span>\r\n               <span class=\"ms-2\">\r\n                 @if(this.state.sort.field === column.field){\r\n                   <span *ngIf=\"state.sort.field === column.field\">\r\n                     {{ state.sort.dir === 'asc' ? '\u2191' : '\u2193' }}\r\n                   </span>\r\n                 }\r\n               </span>\r\n             </div>              \r\n           </th>\r\n         }@else {\r\n           <th \r\n             [draggable]=\"(draggable && column.draggable)\" \r\n             [ngStyle]=\"{'width': column.width}\" \r\n             class=\"flexi-grid-border\" \r\n             [hidden]=\"!column.visible\"\r\n             (dragstart)=\"onDragStart($event, $index)\" \r\n             (dragover)=\"onDragOver($event, $index)\" \r\n             (drop)=\"onDrop($event, $index)\">\r\n             @if(resizable && column.resizable){\r\n               <div class=\"flexi-grid-resize-handle\" (mousedown)=\"onMouseDown($event, column)\"></div>\r\n             }\r\n             <div>\r\n               <span>{{ column.title ? column.title : column.field }}</span>\r\n             </div>\r\n           </th>\r\n         }\r\n       }\r\n     </tr> \r\n     @if(filterable){\r\n      <tr class=\"flexi-grid-mobile-filter-tr\">\r\n        <th colSpan=\"2\">\r\n          @if(isShowMobileFilter()){\r\n            <button class=\"flexi-grid-btn\" (click)=\"closeMobileFilter()\">              \r\n              <svg class=\"svg-mobile cursor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M3.9 22.9C10.5 8.9 24.5 0 40 0H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L396.4 195.6C316.2 212.1 256 283 256 368c0 27.4 6.3 53.4 17.5 76.5c-1.6-.8-3.2-1.8-4.7-2.9l-64-48c-8.1-6-12.8-15.5-12.8-25.6V288.9L9 65.3C-.7 53.4-2.8 36.8 3.9 22.9zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm59.3 107.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L432 345.4l-36.7-36.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L409.4 368l-36.7 36.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L432 390.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L454.6 368l36.7-36.7z\"/></svg>\r\n              Filtreyi Kapat\r\n            </button>\r\n          }@else {\r\n            <button class=\"flexi-grid-btn\" (click)=\"openMobileFilter()\">\r\n              <svg class=\"svg-mobile cursor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"/></svg>\r\n              Filtreyi A\u00E7\r\n            </button>\r\n          }\r\n        </th>\r\n      </tr>\r\n      <tr class=\"flexi-grid-filter-tr\" #flexiGridFilterTr>\r\n        @if(showIndex && !isShowMobileFilter()){\r\n          <th class=\"flexi-grid-filter-th\" [ngStyle]=\"{'width': indexWidth}\"></th>\r\n        }\r\n        @for(column of columns; track $index){          \r\n          @if(column.filterable && column.field){            \r\n            <th class=\"flexi-grid-filter-th\" [hidden]=\"!column.visible\" [attr.data-label]=\"column.title ? column.title : column.field\">\r\n              <div class=\"d-flex flexi-grid-filter-container\">\r\n                @if(column.filterType === \"text\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"text\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                  @if(!column.value){\r\n                    <svg class=\"svg cursor show-filter\" (click)=\"toggleFilterDropdown(column.field)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"/></svg>\r\n                    <div class=\"flexi-grid-dropdown-menu\" [class.show]=\"filterDropdownVisible()[column.field]\">\r\n                      @for(filterType of textFilterTypes(); track filterType.operator){\r\n                        <a class=\"flexi-grid-dropdown-item\" [ngClass]=\"column.filterOperator === filterType.operator ? 'flexi-grid-active' : ''\" (click)=\"applyFilter(column, filterType.operator)\">\r\n                          {{ filterType.value }}\r\n                        </a>\r\n                      }                    \r\n                    </div>\r\n                  }\r\n                }@else if(column.filterType === \"date\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"date\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                }@else if(column.filterType === \"date-time\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"datetime-local\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                }@else if(column.filterType === \"number\"){\r\n                  <input class=\"flexi-grid-filter-input\" type=\"number\" [(ngModel)]=\"column.value\" (input)=\"filter(column.field, column.filterOperator, column.value, column.filterType)\">\r\n                  @if(!column.value){\r\n                    <svg class=\"svg cursor show-filter\" (click)=\"toggleFilterDropdown(column.field)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z\"/></svg>\r\n                    <div class=\"flexi-grid-dropdown-menu\" [class.show]=\"filterDropdownVisible()[column.field]\">\r\n                      @for(filterType of numberFilterTypes(); track filterType.operator){\r\n                        <a class=\"flexi-grid-dropdown-item\" [ngClass]=\"column.filterOperator === filterType.operator ? 'flexi-grid-active' : ''\" (click)=\"applyFilter(column, filterType.operator)\">\r\n                          {{ filterType.value }}\r\n                        </a>\r\n                      }                    \r\n                    </div>\r\n                  }\r\n                }\r\n                \r\n                @if(showClearFilter(column.value)){\r\n                  <svg (click)=\"clearFilter(column.field)\" class=\"svg cursor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M3.9 22.9C10.5 8.9 24.5 0 40 0H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L396.4 195.6C316.2 212.1 256 283 256 368c0 27.4 6.3 53.4 17.5 76.5c-1.6-.8-3.2-1.8-4.7-2.9l-64-48c-8.1-6-12.8-15.5-12.8-25.6V288.9L9 65.3C-.7 53.4-2.8 36.8 3.9 22.9zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm59.3 107.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L432 345.4l-36.7-36.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L409.4 368l-36.7 36.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L432 390.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L454.6 368l36.7-36.7z\"/></svg>\r\n                }\r\n              </div>\r\n            </th>\r\n          }@else {\r\n            @if(!isShowMobileFilter()){\r\n              <th [hidden]=\"!column.visible\"></th>\r\n            }\r\n          }\r\n        }\r\n      </tr>\r\n    }    \r\n   </thead>\r\n   <tbody class=\"relative\" [ngStyle]=\"{'height': autoHeight ? '100%' : height}\" style=\"min-height: 100px;\" [ngStyle]=\"tbodyStyle\">\r\n     @if(loading){        \r\n       <div class=\"flexi-grid-spinner-container\">\r\n         <div class=\"flexi-grid-spinner-1\"></div>\r\n         <div class=\"flexi-grid-spinner-2\"></div>\r\n       </div>\r\n     }\r\n     @if(data.length > 0){      \r\n       @for(item of pagedData(); track $index; let i = $index){\r\n         <tr [ngStyle]=\"{'min-height': trMinHeight}\">\r\n           @if(showIndex){\r\n             @if(!pageable){\r\n               <td class=\"flexi-grid-index-td\" [ngStyle]=\"{'width': indexWidth}\" [attr.data-label]=\"'#'\">{{($index + 1)}}</td>\r\n             }\r\n             @else{\r\n               <td class=\"flexi-grid-index-td\" [ngStyle]=\"{'width': indexWidth}\" [attr.data-label]=\"'#'\">{{($index + ((state.pageNumber -1) * +state.pageSize)) + 1}}</td>\r\n             }\r\n           }\r\n           @for(column of columns; track $index){\r\n             @if(column.columnTemplate && column.visible){\r\n               <td [ngStyle]=\"{'width': column.width, 'text-align': column.textAlign}\" [ngClass]=\"column.className\" [attr.data-label]=\"column.title ? column.title : column.field\">\r\n                 <ng-container *ngTemplateOutlet=\"column.columnTemplate; context: {value: item[column.field], item: item, index: i}\"></ng-container>\r\n               </td>\r\n             }@else {\r\n               <td [ngStyle]=\"{'width': column.width, 'text-align': column.textAlign}\" [hidden]=\"!column.visible\" [ngClass]=\"column.className\" [ngClass]=\"column.hideOverflow ? 'text-overflow-hidden' : ''\" [attr.data-label]=\"column.title ? column.title : column.field\" [title]=\"item ? getFieldValue(item, column.field) : ''\">\r\n                 @if(column.field){\r\n                   @if((column.filterType === \"date\" || column.filterType === \"date-time\") && column.filterType){\r\n                     {{ getFieldValue(item, column.field) | date: column.format! }}\r\n                   }@else if(column.filterType === \"number\" && column.filterType){\r\n                     @if(column.format === \"n\" || column.format === null){\r\n                       {{ (getFieldValue(item, column.field) | trCurrency: \"\": true: column.fraction) }}\r\n                     }@else if(column.format === \"c\"){\r\n                       {{ (getFieldValue(item, column.field) | trCurrency : column.symbol: column.showSymbolInFront: column.fraction) }}\r\n                     }                    \r\n                   }\r\n                   @else {\r\n                     {{ getFieldValue(item, column.field) }}\r\n                   }\r\n                 }\r\n               </td>\r\n             }            \r\n           }\r\n         </tr>\r\n       }\r\n     }@else {\r\n       @if(!loading){\r\n         <tr style=\"height: 100%;\" [ngStyle]=\"{'min-height': trMinHeight}\">\r\n           <td style=\"text-align: center;\" [colSpan]=\"columns?.length\">\r\n             <h4>G\u00F6sterilecek veri bulunamad\u0131!</h4>\r\n           </td>\r\n         </tr>\r\n       }\r\n     }\r\n   </tbody>\r\n   <tfoot>\r\n     <ng-container *ngTemplateOutlet=\"footerTemplate\" class=\"overflow-x\"></ng-container>     \r\n   </tfoot>\r\n </table>\r\n  @if(pageable){\r\n    <div class=\"flexi-grid-pagination-container\">\r\n      @if(!isShowMobileFilter()){\r\n        <div class=\"flexi-grid-pagination-part-one\">\r\n          <select class=\"flexi-grid-pagesize-select\" [ngModel]=\"state.pageSize\" (change)=\"changePageSize($event)\">\r\n            @for(size of pageSizeList; track size){\r\n            <option>{{size}}</option>\r\n            }\r\n          </select>\r\n        </div>\r\n        <div class=\"flexi-grid-pagination-part-two\">\r\n          <ul class=\"flexi-grid-pagination\">\r\n            @if(this.pageNumbers().length > 1){              \r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === 1 ? 'disabled': ''\" (click)=\"changePage(1)\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Previous\">\r\n                  <span aria-hidden=\"true\">&laquo;</span>\r\n                </a>\r\n              </li>\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === 1 ? 'disabled': ''\"\r\n                (click)=\"changePage(state.pageNumber - 1)\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Previous\">\r\n                  <span aria-hidden=\"true\">&#8249;</span>\r\n                </a>\r\n              </li>\r\n              @if(pageNumbers()[0] !== 1){\r\n              <li class=\"flexi-grid-page-item\" (click)=\"previousPageGroup()\">\r\n                <a class=\"flexi-grid-page-link\">...</a>\r\n              </li>\r\n              }\r\n              @for(pageNumber of pageNumbers(); track pageNumber){\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === pageNumber ? 'flexi-grid-active': ''\">\r\n                <a (click)=\"changePage(pageNumber)\" class=\"flexi-grid-page-link\">\r\n                  {{pageNumber}}\r\n                </a>\r\n              </li>\r\n              }\r\n              @if(pageNumbers()[pageNumbers().length - 1] !== totalPageCount()){\r\n              <li class=\"flexi-grid-page-item\" (click)=\"nextPageGroup()\">\r\n                <a class=\"flexi-grid-page-link\">...</a>\r\n              </li>\r\n              }\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === totalPageCount() ? 'disabled': ''\"\r\n                (click)=\"changePage(state.pageNumber + 1)\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Next\">\r\n                  <span aria-hidden=\"true\">&#8250;</span>\r\n                </a>\r\n              </li>\r\n              <li class=\"flexi-grid-page-item\" [ngClass]=\"state.pageNumber === totalPageCount() ? 'disabled': ''\"\r\n                (click)=\"changePage(totalPageCount())\">\r\n                <a class=\"flexi-grid-page-link\" aria-label=\"Next\">\r\n                  <span aria-hidden=\"true\">&raquo;</span>\r\n                </a>\r\n              </li>\r\n            }\r\n          </ul>        \r\n        </div>\r\n      }\r\n      <div class=\"flexi-grid-pagination-part-third\">\r\n        <span> \r\n            {{state.pageNumber}} - {{totalPageCount()}} of {{(total | currency: '': '': '1.0')!.replace(',','.')}} items \r\n        </span>\r\n      </div>\r\n    </div>\r\n  }\r\n</div>", styles: ["@import\"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\";[data-bs-theme=light]{--background-color: #f8f9fa;--background-color-part: #fff;--bg-color-gray: #f8f9fa;--text-color: #000;--text-hover-color: #212529;--active-text-color: #212529;--active-background-color: #ebf5ff;--tbody-hover: #f1f1f1;--hover-background-color: #ebf5ff;--hover-text-color: #212529;--border-color: #dee2e6}[data-bs-theme=dark]{--background-color: #212529;--background-color-part: #141414;--bg-color-gray: #000;--text-color: #fff;--text-hover-color: #000;--tbody-hover: #353232;--active-text-color: #141414;--active-background-color: #f8f9fa;--hover-background-color: #f8f9fa;--hover-text-color: #212529;--border-color: #141414}input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}svg{fill:var(--text-color)}a{cursor:pointer;-webkit-user-select:none;user-select:none;text-decoration:none!important}.flexi-grid-page-size-select{margin-left:20px}.relative{position:relative}.cursor{cursor:pointer}.flexi-grid-spinner-container{position:absolute;z-index:1;width:100%;background-color:#55536d1a;height:100%;display:flex;justify-content:center;align-items:center}.flexi-grid-spinner-1{position:absolute;height:60px;width:60px;border:3px solid;top:auto;border-radius:50%;border-left-color:transparent;border-right-color:transparent;animation:flexi-grid-spin-1 .8s linear infinite;background-color:transparent}.flexi-grid-spinner-2{position:absolute;height:30px;width:30px;top:auto;border:3px solid;border-radius:50%;border-top-color:transparent;border-bottom-color:transparent;animation:flexi-grid-spin-2 1.3s linear infinite;background-color:transparent}@keyframes flexi-grid-spin-1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes flexi-grid-spin-2{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}.flexi-grid-pagination-container{background-color:var(--background-color);padding:20px;display:flex;justify-content:space-between;align-items:center;overflow-x:auto}@media screen and (max-width: 1350px){.flexi-grid-pagination-container,.flexi-grid-pagination-td{flex-direction:column;gap:10px}.flexi-grid-pagination-div{flex-direction:column}}.flexi-grid-pagination{display:flex;list-style:none;overflow-x:auto;margin:0;padding:0}.flexi-grid-pagination a{color:var(--text-color)}.svg{width:30px;margin-left:3px;padding:5px;border:1px solid #ccc}.svg:hover{background-color:#0000001a}.d-flex{display:flex;align-items:center}.flexi-grid-table-container{border:1px solid var(--border-color);border-radius:12px;overflow-x:auto;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;background-color:var(--background-color-part);color:var(--text-color)}.flexi-grid-table-container table{caption-side:top;background-color:var(--background-color-part)}.flexi-grid-table-container caption{caption-side:top;padding:10px;background-color:var(--bg-color-gray);text-align:left;font-weight:700;border-bottom:1px solid var(--border-color)}.flexi-grid-table-container table{width:99.99%;border-collapse:collapse;overflow:auto;position:relative}.flexi-grid-table-container tbody::-webkit-scrollbar{display:none!important;width:12px}.flexi-grid-table-container tbody::-webkit-scrollbar-track{background:var(--background-color-part)}.flexi-grid-table-container tbody::-webkit-scrollbar-thumb{background-color:var(--text-color);border-radius:20px;border:3px solid var(--background-color-part)}.flexi-grid-table-container th,.flexi-grid-table-container td{padding-left:10px;padding-right:10px;text-align:left;border-bottom:1px solid var(--border-color)}.flexi-grid-border{position:relative;padding-right:10px}.flexi-grid-table-container td,.flexi-grid-filter-th,.flexi-grid-table-container th{border-right:1px solid var(--border-color);overflow-wrap:anywhere}.flexi-grid-border:last-child:after{display:none}.flexi-grid-table-container tfoot td{border-right:0px}.flexi-grid-table-container th{background-color:var(--background-color);padding-top:20px;padding-bottom:15px;position:sticky;top:0;z-index:1}.flexi-grid-table-container th{-webkit-user-select:none;user-select:none}.flexi-grid-table-container tbody tr:nth-child(odd){background-color:var(--background-color)}.flexi-grid-table-container tbody tr:hover{background-color:var(--tbody-hover)}.flexi-grid-table-container tbody{flex:1;overflow:auto;display:block}.flexi-grid-table-container tbody tr{display:table;width:100%;table-layout:fixed}.flexi-grid-table-container thead,.flexi-grid-table-container tfoot{display:table;width:calc(100% - 12px);width:100%;table-layout:fixed;z-index:1}.flexi-grid-filter-input{width:80%;padding:5px;border:1px solid #ced4da;border-radius:3px;background-color:var(--background-color-part);color:var(--text-color)}.flexi-grid-select-container{display:flex;align-items:center;margin-top:10px}.flexi-grid-select-container select{margin-right:10px}div .flexi-grid-active{background-color:var(--active-background-color)!important;color:var(--active-text-color)!important}.flexi-grid-active>.flexi-grid-page-link{background-color:var(--active-background-color);color:var(--active-text-color)!important}.flexi-grid-active{z-index:3;color:var(--active-text-color)!important;border-color:var(--active-background-color)!important}.flexi-grid-active a{color:var(--active-text-color)}.flexi-grid-page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#886ab5;background-color:var(--background-color-part);border:1px solid var(--border-color);border-radius:3px}.flexi-grid-page-link:hover{background-color:var(--hover-background-color)!important;color:var(--hover-text-color)!important}.flexi-grid-pagination .flexi-grid-page-item.disabled{cursor:not-allowed;opacity:.5;pointer-events:none}.flexi-grid-pagesize-select{margin-left:5px;padding:5px}.flexi-grid-filter-container{position:relative}.flexi-grid-dropdown-menu{display:none;position:absolute;top:100%;right:0;z-index:1000;float:left;min-width:160px;padding:5px 0;margin:0;font-size:14px;color:var(--text-color);text-align:left;list-style:none;background-color:var(--background-color);background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;box-shadow:0 .5rem 1rem #0000002d}.flexi-grid-dropdown-menu.show{display:block}.flexi-grid-dropdown-item{display:block;padding:3px 1.5rem;clear:both;font-weight:400;color:var(--text-color);text-align:inherit;background-color:transparent;border:0}.flexi-grid-dropdown-item:hover,.flexi-grid-dropdown-item:focus{color:var(--text-hover-color)!important;text-decoration:none;background-color:var(--hover-background-color)}.flexi-grid-dropdown-checkbox-item{padding:5px;display:flex;align-items:center;gap:3px}.flexi-grid-dropdown-checkbox-item:hover{color:var(--text-hover-color)!important;text-decoration:none;background-color:var(--hover-background-color);color:var(--hover-text-color);border-radius:5px}.flexi-grid-dropdown-title{text-align:center;padding-bottom:10px;border-bottom:1px solid (var(--border-color))}.flexi-grid-btn{box-shadow:0 1px rgba(var(--tblr-body-color-rgb),.04);display:inline-block;padding:.4075rem 1rem;font-family:-apple-system,BlinkMacSystemFont,San Francisco,Segoe UI,Roboto,Helvetica Neue,sans-serif;font-size:.875rem;font-weight:500;line-height:1.5;color:var(--text-color);text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid #ccc;border-radius:4px;background-color:var(--background-color);box-shadow:inset 0 1px #ffffff26,0 1px 1px #00000013;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.flexi-grid-btn:hover{border-color:#000}.overflow-x{overflow-x:auto}.flexi-grid-resize-handle{position:absolute;right:0;top:0;height:100%;width:5px;cursor:col-resize;z-index:1}.text-overflow-hidden{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.flexi-grid-caption-div{position:relative;display:flex;justify-content:space-between;align-items:center;width:100%;box-sizing:border-box;background-color:var(--bg-color-gray);padding:15px;border-bottom:1px solid var(--border-color)}.flexi-grid-mobile-filter-tr{display:none!important}.flexi-grid-mobile-filter-tr th{display:flex!important;width:100%;justify-content:center}.svg-mobile{width:20px}@media (max-width: 1000px){.show-filter{display:none}.flexi-grid-table-container{overflow-x:auto;width:100%;margin:0;padding:0;box-shadow:none;border:none}.flexi-grid-table-container table,.flexi-grid-table-container thead,.flexi-grid-table-container tbody,.flexi-grid-table-container th,.flexi-grid-table-container td,.flexi-grid-table-container tr{display:block}.flexi-grid-table-container thead tr{display:none}.flexi-grid-table-container tbody tr{margin-bottom:15px;border-bottom:2px solid var(--border-color)}.flexi-grid-table-container td,.flexi-grid-filter-tr .flexi-grid-filter-th{text-align:left;padding-left:50%;position:relative}.flexi-grid-filter-tr{background:#00000080!important}.flexi-grid-index-td{width:100%!important}.flexi-grid-table-container td:before,.flexi-grid-filter-tr .flexi-grid-filter-th:before{content:attr(data-label);position:absolute;left:10px;width:45%;padding-right:10px;white-space:nowrap;text-align:left;font-weight:700}.flexi-grid-table-container td{width:100%!important}.flexi-grid-mobile-filter-tr{display:block!important}.flexi-grid-filter-tr{position:absolute;width:100%;height:100%;background-color:#0000001a;z-index:999}.flexi-grid-filter-tr.show{display:block!important}.flexi-grid-table-container td:last-child{border-bottom:0}.flexi-grid-caption-div{flex-direction:column;align-items:center}.flexi-grid-pagination{font-size:10px}}\n"] }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }], propDecorators: { data: [{
                type: Input
            }], total: [{
                type: Input
            }], pageable: [{
                type: Input
            }], pageSize: [{
                type: Input
            }], showIndex: [{
                type: Input
            }], pageSizeList: [{
                type: Input
            }], loading: [{
                type: Input
            }], sortable: [{
                type: Input
            }], themeClass: [{
                type: Input
            }], height: [{
                type: Input
            }], filterable: [{
                type: Input
            }], captionTitle: [{
                type: Input
            }], captionTemplate: [{
                type: Input
            }], footerTemplate: [{
                type: Input
            }], showColumnVisibility: [{
                type: Input
            }], showRefreshData: [{
                type: Input
            }], dataBinding: [{
                type: Input
            }], showCaption: [{
                type: Input
            }], showExportExcel: [{
                type: Input
            }], autoHeight: [{
                type: Input
            }], minWidth: [{
                type: Input
            }], useMinWidth: [{
                type: Input
            }], autoWidth: [{
                type: Input
            }], width: [{
                type: Input
            }], indexWidth: [{
                type: Input
            }], columnVisibilityBtnClass: [{
                type: Input
            }], refreshDataBtnClass: [{
                type: Input
            }], exportExcelBtnClass: [{
                type: Input
            }], exportExcelFileName: [{
                type: Input
            }], exportExcelButtonClick: [{
                type: Input
            }], footerPerPageText: [{
                type: Input
            }], resizable: [{
                type: Input
            }], draggable: [{
                type: Input
            }], tbodyStyle: [{
                type: Input
            }], trMinHeight: [{
                type: Input
            }], dataStateChange: [{
                type: Output
            }], columns: [{
                type: ContentChildren,
                args: [FlexiGridColumnComponent]
            }], table: [{
                type: ViewChild,
                args: ['table']
            }], flexiGridFilterTr: [{
                type: ViewChild,
                args: ["flexiGridFilterTr"]
            }], handleClick: [{
                type: HostListener,
                args: ['document:click', ['$event']]
            }], onMouseMove: [{
                type: HostListener,
                args: ['document:mousemove', ['$event']]
            }], onMouseUp: [{
                type: HostListener,
                args: ['document:mouseup']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmxleGktZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9mbGV4aS1ncmlkL3NyYy9saWIvZmxleGktZ3JpZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9mbGV4aS1ncmlkL3NyYy9saWIvZmxleGktZ3JpZC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9DLFNBQVMsRUFBRSxlQUFlLEVBQWMsWUFBWSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQWEsTUFBTSxFQUF5QyxTQUFTLEVBQUUsaUJBQWlCLEVBQVksTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RQLE9BQU8sRUFBYyx3QkFBd0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3JGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7Ozs7O0FBUTdELE1BQU0sT0FBTyxrQkFBa0I7SUEyRTdCLFlBQW9CLEdBQXNCO1FBQXRCLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBMUVqQyxTQUFJLEdBQVUsRUFBRSxDQUFDO1FBQ2pCLFVBQUssR0FBOEIsQ0FBQyxDQUFDO1FBQ3JDLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFDMUIsYUFBUSxHQUFXLEVBQUUsQ0FBQztRQUN0QixjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGlCQUFZLEdBQWEsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDN0QsWUFBTyxHQUFZLEtBQUssQ0FBQztRQUN6QixhQUFRLEdBQVksS0FBSyxDQUFDO1FBQzFCLGVBQVUsR0FBVyxPQUFPLENBQUM7UUFDN0IsV0FBTSxHQUFXLE9BQU8sQ0FBQztRQUN6QixlQUFVLEdBQVksS0FBSyxDQUFDO1FBQzVC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SztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLHdCQUF3QjtzQkFBaEMsS0FBSztnQkFDRyxtQkFBbUI7c0JBQTNCLEtBQUs7Z0JBQ0csbUJBQW1CO3NCQUEzQixLQUFLO2dCQUNHLG1CQUFtQjtzQkFBM0IsS0FBSztnQkFDRyxzQkFBc0I7c0JBQTlCLEtBQUs7Z0JBQ0csaUJBQWlCO3NCQUF6QixLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBNkJJLGVBQWU7c0JBQXhCLE1BQU07Z0JBRW9DLE9BQU87c0JBQWpELGVBQWU7dUJBQUMsd0JBQXdCO2dCQUVyQixLQUFLO3NCQUF4QixTQUFTO3VCQUFDLE9BQU87Z0JBQ2MsaUJBQWlCO3NCQUFoRCxTQUFTO3VCQUFDLG1CQUFtQjtnQkFpVjlCLFdBQVc7c0JBRFYsWUFBWTt1QkFBQyxnQkFBZ0IsRUFBRSxDQUFDLFFBQVEsQ0FBQztnQkFpRTFDLFdBQVc7c0JBRFYsWUFBWTt1QkFBQyxvQkFBb0IsRUFBRSxDQUFDLFFBQVEsQ0FBQztnQkFTOUMsU0FBUztzQkFEUixZQUFZO3VCQUFDLGtCQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIENvbnRlbnRDaGlsZHJlbiwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBIb3N0TGlzdGVuZXIsIElucHV0LCBPbkNoYW5nZXMsIE91dHB1dCwgUXVlcnlMaXN0LCBTaW1wbGVDaGFuZ2VzLCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkLCBWaWV3RW5jYXBzdWxhdGlvbiwgY29tcHV0ZWQsIHNpZ25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGaWx0ZXJUeXBlLCBGbGV4aUdyaWRDb2x1bW5Db21wb25lbnQgfSBmcm9tICcuL2ZsZXhpLWdyaWQtY29sdW1uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFN0YXRlRmlsdGVyTW9kZWwsIFN0YXRlTW9kZWwgfSBmcm9tICcuL3N0YXRlLm1vZGVsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZmxleGktZ3JpZCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2ZsZXhpLWdyaWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsOiBgLi9mbGV4aS1ncmlkLmNvbXBvbmVudC5jc3NgLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIEZsZXhpR3JpZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCB7IFxyXG4gIEBJbnB1dCgpIGRhdGE6IGFueVtdID0gW107XHJcbiAgQElucHV0KCkgdG90YWw6IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQgPSAwO1xyXG4gIEBJbnB1dCgpIHBhZ2VhYmxlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgcGFnZVNpemU6IG51bWJlciA9IDEwO1xyXG4gIEBJbnB1dCgpIHNob3dJbmRleDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHBhZ2VTaXplTGlzdDogbnVtYmVyW10gPSBbNSwgMTAsIDIwLCAzMCwgNTAsIDEwMCwgNTAwLCAxMDAwXTtcclxuICBASW5wdXQoKSBsb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgc29ydGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSB0aGVtZUNsYXNzOiBzdHJpbmcgPSBcImxpZ2h0XCI7XHJcbiAgQElucHV0KCkgaGVpZ2h0OiBzdHJpbmcgPSBcIjQyMHB4XCI7XHJcbiAgQElucHV0KCkgZmlsdGVyYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGNhcHRpb25UaXRsZTogc3RyaW5nID0gXCJcIjtcclxuICBASW5wdXQoKSBjYXB0aW9uVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gfCBhbnk7XHJcbiAgQElucHV0KCkgZm9vdGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gfCBhbnk7XHJcbiAgQElucHV0KCkgc2hvd0NvbHVtblZpc2liaWxpdHk6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHNob3dSZWZyZXNoRGF0YTogYm9vbGVhbiA9IHRydWU7XHJcbiAgQElucHV0KCkgZGF0YUJpbmRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBzaG93Q2FwdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHNob3dFeHBvcnRFeGNlbDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGF1dG9IZWlnaHQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBtaW5XaWR0aDogc3RyaW5nID0gXCIxMDUwcHhcIjtcclxuICBASW5wdXQoKSB1c2VNaW5XaWR0aDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGF1dG9XaWR0aDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHdpZHRoOiBzdHJpbmcgPSBcIjEwMCVcIjtcclxuICBASW5wdXQoKSBpbmRleFdpZHRoOiBzdHJpbmcgPSBcIjcwcHhcIjtcclxuICBASW5wdXQoKSBjb2x1bW5WaXNpYmlsaXR5QnRuQ2xhc3M6IHN0cmluZyA9IFwiZmxleGktZ3JpZC1idG5cIjtcclxuICBASW5wdXQoKSByZWZyZXNoRGF0YUJ0bkNsYXNzOiBzdHJpbmcgPSBcImZsZXhpLWdyaWQtYnRuXCI7XHJcbiAgQElucHV0KCkgZXhwb3J0RXhjZWxCdG5DbGFzczogc3RyaW5nID0gXCJmbGV4aS1ncmlkLWJ0blwiO1xyXG4gIEBJbnB1dCgpIGV4cG9ydEV4Y2VsRmlsZU5hbWU6IHN0cmluZyA9IFwiZXhjZWwtZXhwb3J0XCI7XHJcbiAgQElucHV0KCkgZXhwb3J0RXhjZWxCdXR0b25DbGljazogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xyXG4gIEBJbnB1dCgpIGZvb3RlclBlclBhZ2VUZXh0OiBzdHJpbmcgPSBcIml0ZW1zIHBlciBwYWdlXCI7XHJcbiAgQElucHV0KCkgcmVzaXphYmxlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgZHJhZ2dhYmxlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgdGJvZHlTdHlsZTogYW55ID0ge307XHJcbiAgQElucHV0KCkgdHJNaW5IZWlnaHQ6IHN0cmluZyA9IFwiNDVweFwiO1xyXG5cclxuICBwYWdlTnVtYmVyQ291bnQgPSBzaWduYWw8bnVtYmVyPig1KTtcclxuICBwYWdlTnVtYmVycyA9IHNpZ25hbDxudW1iZXJbXT4oW10pO1xyXG4gIHRvdGFsUGFnZUNvdW50ID0gc2lnbmFsPG51bWJlcj4oMCk7XHJcbiAgc3RhdGU6IFN0YXRlTW9kZWwgPSBuZXcgU3RhdGVNb2RlbCgpO1xyXG4gIHBhZ2VkRGF0YSA9IHNpZ25hbDxhbnlbXT4oW10pO1xyXG4gIHRpbWVvdXRJZDogYW55O1xyXG4gIGZpbHRlckRyb3Bkb3duVmlzaWJsZSA9IHNpZ25hbDx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4oe30pO1xyXG4gIGNvbHVtblZpc2liaWxpdHlEcm9wZG93blZpc2libGUgPSBzaWduYWwoZmFsc2UpO1xyXG4gIHRleHRGaWx0ZXJUeXBlcyA9IHNpZ25hbDx7IG9wZXJhdG9yOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVtdPihbXHJcbiAgICB7IG9wZXJhdG9yOiBcImVxXCIsIHZhbHVlOiAnRcWfaXR0aXInIH0sXHJcbiAgICB7IG9wZXJhdG9yOiBcIm5lXCIsIHZhbHVlOiAnRcWfaXQgZGXEn2lsZGlyJyB9LFxyXG4gICAgeyBvcGVyYXRvcjogXCJjb250YWluc1wiLCB2YWx1ZTogJ8Sww6dlcmlyJyB9LFxyXG4gICAgeyBvcGVyYXRvcjogXCJub3QgY29udGFpbnNcIiwgdmFsdWU6ICfEsMOnZXJtZXonIH0sXHJcbiAgICB7IG9wZXJhdG9yOiBcInN0YXJ0c3dpdGhcIiwgdmFsdWU6ICfEsGxlIGJhxZ9sYXInIH0sXHJcbiAgICB7IG9wZXJhdG9yOiBcImVuZHN3aXRoXCIsIHZhbHVlOiAnxLBsZSBiaXRlcicgfVxyXG4gIF0pO1xyXG4gIG51bWJlckZpbHRlclR5cGVzID0gc2lnbmFsPHsgb3BlcmF0b3I6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W10+KFtcclxuICAgIHsgb3BlcmF0b3I6IFwiZXFcIiwgdmFsdWU6ICdFxZ9pdHRpcicgfSxcclxuICAgIHsgb3BlcmF0b3I6IFwibmVcIiwgdmFsdWU6ICdFxZ9pdCBkZcSfaWxkaXInIH0sXHJcbiAgICB7IG9wZXJhdG9yOiBcImd0XCIsIHZhbHVlOiAnRGFoYSBiw7x5w7xrdMO8cicgfSxcclxuICAgIHsgb3BlcmF0b3I6IFwiZ2VcIiwgdmFsdWU6ICdEYWhhIGLDvHnDvGt0w7xyIHlhIGRhIGXFn2l0dGlyJyB9LFxyXG4gICAgeyBvcGVyYXRvcjogXCJsdFwiLCB2YWx1ZTogJ0RhaGEga8O8w6fDvGt0w7xyJyB9LFxyXG4gICAgeyBvcGVyYXRvcjogXCJsZVwiLCB2YWx1ZTogJ0RhaGEga8O8w6fDvGt0w7xyIHlhIGRhIGXFn2l0dGlyJyB9XHJcbiAgXSk7XHJcbiAgZHJhZ2dlZENvbHVtbkluZGV4OiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgdGVtcERyYWdnYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBAT3V0cHV0KCkgZGF0YVN0YXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIEBDb250ZW50Q2hpbGRyZW4oRmxleGlHcmlkQ29sdW1uQ29tcG9uZW50KSBjb2x1bW5zOiBRdWVyeUxpc3Q8RmxleGlHcmlkQ29sdW1uQ29tcG9uZW50PiB8IHVuZGVmaW5lZDtcclxuXHJcbiAgQFZpZXdDaGlsZCgndGFibGUnKSB0YWJsZTogRWxlbWVudFJlZiB8IHVuZGVmaW5lZDtcclxuICBAVmlld0NoaWxkKFwiZmxleGlHcmlkRmlsdGVyVHJcIikgZmxleGlHcmlkRmlsdGVyVHI6IEVsZW1lbnRSZWY8SFRNTFRhYmxlUm93RWxlbWVudD4gfCB1bmRlZmluZWQ7XHJcbiAgcmVzaXppbmdDb2x1bW46IGFueTtcclxuICBzdGFydFg6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICBzdGFydFdpZHRoOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgaXNTaG93TW9iaWxlRmlsdGVyID0gc2lnbmFsPGJvb2xlYW4+KGZhbHNlKTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmKXt9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHsgICAgXHJcbiAgIC8vIGNvbnNvbGUubG9nKFwiY2hhbmdlIGlzIHdvcmtpbmcuLi5cIik7XHJcbiAgICAgICBcclxuICAgIGlmKHRoaXMuZGF0YS5sZW5ndGggPiAwKXtcclxuICAgICAgaWYgKCF0aGlzLmNvbHVtbnMgfHwgdGhpcy5jb2x1bW5zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbHVtbnNGcm9tRGF0YSgpO1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucGFnZVNpemUgIT09IHRoaXMuc3RhdGUucGFnZVNpemUpIHsgICAgIFxyXG4gICAgICB0aGlzLnN0YXRlLnBhZ2VTaXplID0gK3RoaXMucGFnZVNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucGFnZWFibGUpIHtcclxuICAgICAgdGhpcy5zZXRQYWdlTnVtYmVycygpO1xyXG4gICAgICB0aGlzLnVwZGF0ZVBhZ2VkRGF0YSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wYWdlZERhdGEuc2V0KHRoaXMuZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuY29sdW1ucyB8fCB0aGlzLmNvbHVtbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbHVtbnNGcm9tRGF0YSgpO1xyXG4gICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplQ29sdW1uc0Zyb21EYXRhKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBmaXJzdEl0ZW0gPSB0aGlzLmRhdGFbMF07XHJcbiAgICAgIGNvbnN0IGNvbHVtbnNBcnJheSA9IE9iamVjdC5rZXlzKGZpcnN0SXRlbSkubWFwKGtleSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29sdW1uID0gbmV3IEZsZXhpR3JpZENvbHVtbkNvbXBvbmVudCgpO1xyXG4gICAgICAgIGNvbHVtbi5maWVsZCA9IGtleTtcclxuICAgICAgICBjb2x1bW4udGl0bGUgPSB0aGlzLmNhcGl0YWxpemVGaXJzdExldHRlcihrZXkpO1xyXG4gICAgICAgIGNvbHVtbi52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICBjb2x1bW4uaGlkZU92ZXJmbG93ID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gY29sdW1uO1xyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgLy8gUmVzZXR0aW5nIGNvbHVtbnMgd2l0aCB0aGUgbmV3bHkgY3JlYXRlZCBjb2x1bW5zIGFycmF5XHJcbiAgICAgIGlmICh0aGlzLmNvbHVtbnMpIHtcclxuICAgICAgICB0aGlzLmNvbHVtbnMucmVzZXQoY29sdW1uc0FycmF5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKHN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VQYWdlKHBhZ2VOdW1iZXI6IG51bWJlcikge1xyXG4gICAgaWYgKHBhZ2VOdW1iZXIgPiB0aGlzLnRvdGFsUGFnZUNvdW50KCkpIHtcclxuICAgICAgcGFnZU51bWJlciA9IHRoaXMudG90YWxQYWdlQ291bnQoKTtcclxuICAgIH0gZWxzZSBpZiAocGFnZU51bWJlciA8IDEpIHtcclxuICAgICAgcGFnZU51bWJlciA9IDE7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJldmlvdXNQYWdlTnVtYmVyID0gdGhpcy5zdGF0ZS5wYWdlTnVtYmVyO1xyXG4gICAgdGhpcy5zdGF0ZS5wYWdlTnVtYmVyID0gK3BhZ2VOdW1iZXI7XHJcbiAgICB0aGlzLnN0YXRlLnNraXAgPSAocGFnZU51bWJlciAtIDEpICogK3RoaXMuc3RhdGUucGFnZVNpemU7XHJcbiAgICB0aGlzLmRhdGFTdGF0ZUNoYW5nZS5lbWl0KHRoaXMuc3RhdGUpO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZSBwYWdlIG51bWJlciBjcm9zc2VkIGEgMTAtcGFnZSBib3VuZGFyeVxyXG4gICAgY29uc3QgcHJldmlvdXNHcm91cCA9IE1hdGguZmxvb3IoKHByZXZpb3VzUGFnZU51bWJlciAtIDEpIC8gdGhpcy5wYWdlTnVtYmVyQ291bnQoKSk7XHJcbiAgICBjb25zdCBjdXJyZW50R3JvdXAgPSBNYXRoLmZsb29yKChwYWdlTnVtYmVyIC0gMSkgLyB0aGlzLnBhZ2VOdW1iZXJDb3VudCgpKTtcclxuXHJcbiAgICBpZiAoY3VycmVudEdyb3VwID4gcHJldmlvdXNHcm91cCkge1xyXG4gICAgICB0aGlzLm5leHRQYWdlR3JvdXAoKTtcclxuICAgIH0gZWxzZSBpZiAoY3VycmVudEdyb3VwIDwgcHJldmlvdXNHcm91cCkge1xyXG4gICAgICB0aGlzLnByZXZpb3VzUGFnZUdyb3VwKCk7XHJcbiAgICB9IGVsc2UgeyAgICAgIFxyXG4gICAgICB0aGlzLnNldFBhZ2VOdW1iZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVQYWdlZERhdGEoKTtcclxuICB9XHJcblxyXG4gIHNldFBhZ2VOdW1iZXJzKCkgeyAgICBcclxuICAgIGNvbnN0IHBhZ2VDb3VudCA9IE1hdGguY2VpbCh0aGlzLnRvdGFsISAvICt0aGlzLnN0YXRlLnBhZ2VTaXplKTtcclxuICAgIGNvbnN0IG51bWJlcnMgPSBbXTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGN1cnJlbnQgcmFuZ2Ugb2YgcGFnZSBudW1iZXJzXHJcbiAgICBjb25zdCBjdXJyZW50R3JvdXAgPSBNYXRoLmZsb29yKCh0aGlzLnN0YXRlLnBhZ2VOdW1iZXIgLSAxKSAvIHRoaXMucGFnZU51bWJlckNvdW50KCkpO1xyXG4gICAgY29uc3Qgc3RhcnRQYWdlID0gY3VycmVudEdyb3VwICogdGhpcy5wYWdlTnVtYmVyQ291bnQoKSArIDE7XHJcbiAgICBjb25zdCBlbmRQYWdlID0gTWF0aC5taW4oc3RhcnRQYWdlICsgKHRoaXMucGFnZU51bWJlckNvdW50KCkgLSAxKSwgcGFnZUNvdW50KTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gc3RhcnRQYWdlOyBpIDw9IGVuZFBhZ2U7IGkrKykge1xyXG4gICAgICBudW1iZXJzLnB1c2goaSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMucGFnZU51bWJlcnMuc2V0KG51bWJlcnMpO1xyXG4gICAgdGhpcy50b3RhbFBhZ2VDb3VudC5zZXQocGFnZUNvdW50KTtcclxuICB9XHJcblxyXG4gIG5leHRQYWdlR3JvdXAoKSB7XHJcbiAgICBjb25zdCBwYWdlQ291bnQgPSBNYXRoLmNlaWwodGhpcy50b3RhbCEgLyArdGhpcy5zdGF0ZS5wYWdlU2l6ZSk7XHJcbiAgICBjb25zdCBjdXJyZW50R3JvdXAgPSBNYXRoLmZsb29yKCh0aGlzLnN0YXRlLnBhZ2VOdW1iZXIgLSAxKSAvIHRoaXMucGFnZU51bWJlckNvdW50KCkpO1xyXG4gICAgY29uc3QgbmV4dEdyb3VwU3RhcnRQYWdlID0gKGN1cnJlbnRHcm91cCkgKiB0aGlzLnBhZ2VOdW1iZXJDb3VudCgpICsgMTtcclxuXHJcbiAgICBpZiAobmV4dEdyb3VwU3RhcnRQYWdlIDw9IHBhZ2VDb3VudCkge1xyXG4gICAgICB0aGlzLnN0YXRlLnBhZ2VOdW1iZXIgPSBuZXh0R3JvdXBTdGFydFBhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRQYWdlTnVtYmVycygpO1xyXG4gICAgdGhpcy51cGRhdGVQYWdlZERhdGEoKTtcclxuICB9XHJcblxyXG4gIHByZXZpb3VzUGFnZUdyb3VwKCkge1xyXG4gICAgY29uc3QgY3VycmVudEdyb3VwID0gTWF0aC5mbG9vcigodGhpcy5zdGF0ZS5wYWdlTnVtYmVyIC0gMSkgLyB0aGlzLnBhZ2VOdW1iZXJDb3VudCgpKTtcclxuICAgIGNvbnN0IHByZXZpb3VzR3JvdXBTdGFydFBhZ2UgPSAoY3VycmVudEdyb3VwKSAqIHRoaXMucGFnZU51bWJlckNvdW50KCkgKyAxO1xyXG5cclxuICAgIGlmIChwcmV2aW91c0dyb3VwU3RhcnRQYWdlID4gMCkge1xyXG4gICAgICB0aGlzLnN0YXRlLnBhZ2VOdW1iZXIgPSBwcmV2aW91c0dyb3VwU3RhcnRQYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0UGFnZU51bWJlcnMoKTtcclxuICAgIHRoaXMudXBkYXRlUGFnZWREYXRhKCk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VQYWdlU2l6ZShldmVudDphbnkpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gK2V2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgIHRoaXMuc3RhdGUucGFnZVNpemUgPSB2YWx1ZTtcclxuICAgIHRoaXMuc3RhdGUucGFnZU51bWJlciA9IDE7XHJcbiAgICB0aGlzLnN0YXRlLnNraXAgPSAwO1xyXG4gICAgaWYgKHRoaXMucGFnZWFibGUgJiYgdGhpcy5kYXRhQmluZGluZykge1xyXG4gICAgICB0aGlzLmRhdGFTdGF0ZUNoYW5nZS5lbWl0KHRoaXMuc3RhdGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51cGRhdGVQYWdlZERhdGEoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVBhZ2VkRGF0YSgpIHtcclxuICAgIGxldCBmaWx0ZXJlZERhdGEgPSB0aGlzLmRhdGE7XHJcbiAgICBcclxuICAgIGlmKCFmaWx0ZXJlZERhdGEpIHtcclxuICAgICAgdGhpcy5wYWdlZERhdGEuc2V0KFtdKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5zdGF0ZS5maWx0ZXIubGVuZ3RoID4gMCAmJiAhdGhpcy5kYXRhQmluZGluZykge1xyXG4gICAgICBjb25zdCBmaWx0ZXJzID0gdGhpcy5zdGF0ZS5maWx0ZXIuZmlsdGVyKHA9PiBwLnZhbHVlKTtcclxuXHJcbiAgICAgIGZpbHRlcnMuZm9yRWFjaChmaWx0ZXIgPT4ge1xyXG4gICAgICAgIGZpbHRlcmVkRGF0YSA9IGZpbHRlcmVkRGF0YS5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmaWVsZCA9IGZpbHRlci5maWVsZDtcclxuICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmlsdGVyLnZhbHVlO1xyXG4gICAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gaXRlbVtmaWVsZF0udG9TdHJpbmcoKS50b0xvY2FsZUxvd2VyQ2FzZSgndHInKTtcclxuICAgICAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS50b0xvY2FsZUxvd2VyQ2FzZSgndHInKTtcclxuXHJcbiAgICAgICAgICBzd2l0Y2ggKGZpbHRlci5vcGVyYXRvcikge1xyXG4gICAgICAgICAgICBjYXNlICdlcSc6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1WYWx1ZSA9PT0gZmlsdGVyVmFsdWU7XHJcbiAgICAgICAgICAgIGNhc2UgJ25lJzpcclxuICAgICAgICAgICAgICByZXR1cm4gaXRlbVZhbHVlICE9PSBmaWx0ZXJWYWx1ZTtcclxuICAgICAgICAgICAgY2FzZSAnY29udGFpbnMnOlxyXG4gICAgICAgICAgICAgIHJldHVybiBpdGVtVmFsdWUuaW5jbHVkZXMoZmlsdGVyVmFsdWUpO1xyXG4gICAgICAgICAgICBjYXNlICdub3QgY29udGFpbnMnOlxyXG4gICAgICAgICAgICAgIHJldHVybiAhaXRlbVZhbHVlLmluY2x1ZGVzKGZpbHRlclZhbHVlKTtcclxuICAgICAgICAgICAgY2FzZSAnc3RhcnRzd2l0aCc6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1WYWx1ZS5zdGFydHNXaXRoKGZpbHRlclZhbHVlKTtcclxuICAgICAgICAgICAgY2FzZSAnZW5kc3dpdGgnOlxyXG4gICAgICAgICAgICAgIHJldHVybiBpdGVtVmFsdWUuZW5kc1dpdGgoZmlsdGVyVmFsdWUpO1xyXG4gICAgICAgICAgICBjYXNlICdndCc6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoaXRlbVZhbHVlKSA+IHBhcnNlRmxvYXQoZmlsdGVyVmFsdWUpO1xyXG4gICAgICAgICAgICBjYXNlICdnZSc6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoaXRlbVZhbHVlKSA+PSBwYXJzZUZsb2F0KGZpbHRlclZhbHVlKTtcclxuICAgICAgICAgICAgY2FzZSAnbHQnOlxyXG4gICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGl0ZW1WYWx1ZSkgPCBwYXJzZUZsb2F0KGZpbHRlclZhbHVlKTtcclxuICAgICAgICAgICAgY2FzZSAnbGUnOlxyXG4gICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGl0ZW1WYWx1ZSkgPD0gcGFyc2VGbG9hdChmaWx0ZXJWYWx1ZSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gT3JkZXIgZGF0YSBpZiBzb3J0YWJsZSBpcyB0cnVlXHJcbiAgICBpZiAodGhpcy5zb3J0YWJsZSAmJiB0aGlzLnN0YXRlLnNvcnQuZmllbGQgJiYgIXRoaXMuZGF0YUJpbmRpbmcpIHtcclxuICAgICAgZmlsdGVyZWREYXRhID0gZmlsdGVyZWREYXRhLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuc3RhdGUuc29ydC5maWVsZDtcclxuICAgICAgICBjb25zdCBkaXIgPSB0aGlzLnN0YXRlLnNvcnQuZGlyID09PSAnYXNjJyA/IDEgOiAtMTtcclxuICAgICAgICBpZiAoYVtmaWVsZF0gPCBiW2ZpZWxkXSkgcmV0dXJuIC0xICogZGlyO1xyXG4gICAgICAgIGlmIChhW2ZpZWxkXSA+IGJbZmllbGRdKSByZXR1cm4gMSAqIGRpcjtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoIXRoaXMuZGF0YUJpbmRpbmcpe1xyXG4gICAgICB0aGlzLnRvdGFsID0gZmlsdGVyZWREYXRhLmxlbmd0aDtcclxuICAgICAgdGhpcy5zZXRQYWdlTnVtYmVycygpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gUGFnaW5hdGlvbiBsb2dpY1xyXG4gICAgaWYoZmlsdGVyZWREYXRhKXtcclxuICAgICAgaWYgKGZpbHRlcmVkRGF0YS5sZW5ndGggPiArdGhpcy5zdGF0ZS5wYWdlU2l6ZSAmJiAhdGhpcy5kYXRhQmluZGluZyAmJiB0aGlzLnBhZ2VhYmxlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLnN0YXRlLnNraXA7XHJcbiAgICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyArdGhpcy5zdGF0ZS5wYWdlU2l6ZTtcclxuICAgICAgICB0aGlzLnBhZ2VkRGF0YS5zZXQoZmlsdGVyZWREYXRhLnNsaWNlKHN0YXJ0LCBlbmQpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnBhZ2VkRGF0YS5zZXQoZmlsdGVyZWREYXRhKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc29ydERhdGEoKSB7XHJcbiAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGEuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICBjb25zdCBmaWVsZCA9IHRoaXMuc3RhdGUuc29ydC5maWVsZDtcclxuICAgICAgY29uc3QgZGlyID0gdGhpcy5zdGF0ZS5zb3J0LmRpciA9PT0gJ2FzYycgPyAxIDogLTE7XHJcbiAgICAgIGlmIChhW2ZpZWxkXSA8IGJbZmllbGRdKSByZXR1cm4gLTEgKiBkaXI7XHJcbiAgICAgIGlmIChhW2ZpZWxkXSA+IGJbZmllbGRdKSByZXR1cm4gMSAqIGRpcjtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZih0aGlzLmRhdGFCaW5kaW5nKXtcclxuICAgICAgdGhpcy5kYXRhU3RhdGVDaGFuZ2UuZW1pdCh0aGlzLnN0YXRlKTtcclxuICAgIH1lbHNle1xyXG4gICAgICB0aGlzLnVwZGF0ZVBhZ2VkRGF0YSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc29ydChmaWVsZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnN0YXRlLnNvcnQuZmllbGQgPSBmaWVsZDtcclxuICAgIHRoaXMuc3RhdGUucGFnZU51bWJlciA9IDE7XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5zb3J0LmRpciA9PT0gXCJhc2NcIikge1xyXG4gICAgICB0aGlzLnN0YXRlLnNvcnQuZGlyID0gXCJkZXNjXCI7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuc29ydC5kaXIgPT09ICdkZXNjJykge1xyXG4gICAgICB0aGlzLnN0YXRlLnNvcnQuZGlyID0gXCJcIjtcclxuICAgICAgdGhpcy5zdGF0ZS5zb3J0LmZpZWxkID0gJyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN0YXRlLnNvcnQuZGlyID0gJ2FzYydcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNvcnREYXRhKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVUaGVtZSgpIHtcclxuICAgIHRoaXMudGhlbWVDbGFzcyA9IHRoaXMudGhlbWVDbGFzcyA9PT0gJ2xpZ2h0JyA/ICdkYXJrJyA6ICdsaWdodCc7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVGaWx0ZXJEcm9wZG93bihmaWVsZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmZpbHRlckRyb3Bkb3duVmlzaWJsZSgpW2ZpZWxkXSA9ICF0aGlzLmZpbHRlckRyb3Bkb3duVmlzaWJsZSgpW2ZpZWxkXTtcclxuICB9XHJcblxyXG4gIGFwcGx5RmlsdGVyKGNvbHVtbjogRmxleGlHcmlkQ29sdW1uQ29tcG9uZW50LCBvcGVyYXRvcjogc3RyaW5nKXsgICAgXHJcbiAgICB0aGlzLmZpbHRlckRyb3Bkb3duVmlzaWJsZSgpW2NvbHVtbi5maWVsZF0gPSBmYWxzZTsgICAgXHJcbiAgICBjb2x1bW4uZmlsdGVyT3BlcmF0b3IgPSBvcGVyYXRvcjtcclxuICAgIGlmKGNvbHVtbi52YWx1ZSAhPT0gXCJcIil7XHJcbiAgICAgIHRoaXMuZmlsdGVyKGNvbHVtbi5maWVsZCwgb3BlcmF0b3IsIGNvbHVtbi52YWx1ZSwgY29sdW1uLmZpbHRlclR5cGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmlsdGVyKGZpZWxkOiBzdHJpbmcsIG9wZXJhdG9yOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHR5cGU6IEZpbHRlclR5cGUpIHtcclxuICAgIGlmICh0aGlzLnRpbWVvdXRJZCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7ICAgICAgXHJcbiAgICAgIGlmICh2YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgIHRoaXMuc3RhdGUucGFnZU51bWJlciA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5za2lwID0gMDtcclxuICAgICAgICBsZXQgZmlsdGVyRmllbGQgPSB0aGlzLnN0YXRlLmZpbHRlci5maW5kKHAgPT4gcC5maWVsZCA9PT0gZmllbGQpO1xyXG4gICAgICAgIGlmIChmaWx0ZXJGaWVsZCkge1xyXG4gICAgICAgICAgZmlsdGVyRmllbGQudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgIGZpbHRlckZpZWxkLm9wZXJhdG9yID0gb3BlcmF0b3I7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZpbHRlckZpZWxkID0gbmV3IFN0YXRlRmlsdGVyTW9kZWwoKTtcclxuICAgICAgICAgIGZpbHRlckZpZWxkLmZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgICBmaWx0ZXJGaWVsZC5vcGVyYXRvciA9IG9wZXJhdG9yO1xyXG4gICAgICAgICAgZmlsdGVyRmllbGQudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgIGZpbHRlckZpZWxkLnR5cGUgPSB0eXBlXHJcbiAgICAgICAgICB0aGlzLnN0YXRlLmZpbHRlci5wdXNoKGZpbHRlckZpZWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZmluZEluZGV4ID0gdGhpcy5zdGF0ZS5maWx0ZXIuZmluZEluZGV4KHAgPT4gcC5maWVsZCA9PT0gZmllbGQpO1xyXG5cclxuICAgICAgICBpZiAoZmluZEluZGV4ID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMuc3RhdGUuZmlsdGVyLnNwbGljZShmaW5kSW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYodGhpcy5kYXRhQmluZGluZyl7XHJcbiAgICAgICAgdGhpcy5kYXRhU3RhdGVDaGFuZ2UuZW1pdCh0aGlzLnN0YXRlKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQYWdlZERhdGEoKTtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcy5kYXRhQmluZGluZyA/IDUwMCA6IDEpO1xyXG4gIH1cclxuXHJcbiAgc2hvd0NsZWFyRmlsdGVyKHZhbHVlOiBhbnkpIHtcclxuICAgIGlmICh2YWx1ZSkgcmV0dXJuIHRydWU7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjbGVhckZpbHRlcihmaWVsZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmZpbHRlcihmaWVsZCwgXCJjb250YWluc1wiLCBcIlwiLCBcInRleHRcIik7XHJcbiAgICBjb25zdCBjb2x1bW4gPSB0aGlzLmNvbHVtbnM/LmZpbmQocCA9PiBwLmZpZWxkID09PSBmaWVsZCk7XHJcbiAgICBpZiAoY29sdW1uKSB7XHJcbiAgICAgIGNvbHVtbi52YWx1ZSA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5kYXRhQmluZGluZyl7XHJcblxyXG4gICAgfWVsc2V7XHJcbiAgICAgIHRoaXMudXBkYXRlUGFnZWREYXRhKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDb2x1bW5WaXNpYmlsaXR5RHJvcGRvd24oKSB7XHJcbiAgICB0aGlzLmNvbHVtblZpc2liaWxpdHlEcm9wZG93blZpc2libGUuc2V0KCF0aGlzLmNvbHVtblZpc2liaWxpdHlEcm9wZG93blZpc2libGUoKSlcclxuICB9XHJcblxyXG4gIHJlZnJlc2hEYXRhTWV0aG9kKCl7XHJcbiAgICB0aGlzLnN0YXRlID0gbmV3IFN0YXRlTW9kZWwoKTtcclxuICAgIHRoaXMuc3RhdGUucGFnZVNpemUgPSB0aGlzLnBhZ2VTaXplO1xyXG4gICAgdGhpcy5jb2x1bW5zPy5mb3JFYWNoKHZhbCA9PiB7XHJcbiAgICAgIHZhbC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZGF0YVN0YXRlQ2hhbmdlLmVtaXQodGhpcy5zdGF0ZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZUFsbERyb3Bkb3ducygpe1xyXG4gICAgZm9yKGxldCBpIGluIHRoaXMuZmlsdGVyRHJvcGRvd25WaXNpYmxlKCkpe1xyXG4gICAgICB0aGlzLmZpbHRlckRyb3Bkb3duVmlzaWJsZSgpW2ldID0gZmFsc2U7ICAgICAgXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDpjbGljaycsIFsnJGV2ZW50J10pXHJcbiAgaGFuZGxlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmICghdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1tZW51JykgJiYgIXRhcmdldC5jbG9zZXN0KCcuc3ZnJykpIHtcclxuICAgICAgdGhpcy5jbG9zZUFsbERyb3Bkb3ducygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCF0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLW1lbnUnKSAmJiAhdGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpKXtcclxuICAgICAgdGhpcy5jb2x1bW5WaXNpYmlsaXR5RHJvcGRvd25WaXNpYmxlLnNldChmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSAgXHJcblxyXG4gIG9uRXhwb3J0RXhjZWxCdXR0b25DbGljaygpIHtcclxuICAgIGlmICh0aGlzLmV4cG9ydEV4Y2VsQnV0dG9uQ2xpY2spIHtcclxuICAgICAgdGhpcy5leHBvcnRFeGNlbEJ1dHRvbkNsaWNrKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmV4cG9ydEV4Y2VsKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBleHBvcnRFeGNlbCgpIHtcclxuICAgIGNvbnN0IHZpc2libGVDb2x1bW5zOiBhbnlbXSA9IHRoaXMuY29sdW1ucz8uZmlsdGVyKGNvbHVtbiA9PiBjb2x1bW4udmlzaWJsZSkubWFwKGNvbHVtbiA9PiB7XHJcbiAgICAgIHJldHVybiB7IGZpZWxkOiBjb2x1bW4uZmllbGQsIHRpdGxlOiBjb2x1bW4udGl0bGUgfHwgY29sdW1uLmZpZWxkIH07XHJcbiAgICB9KSB8fCBbXTtcclxuICBcclxuICAgIGxldCBjc3ZEYXRhID0gdmlzaWJsZUNvbHVtbnMubWFwKGNvbCA9PiBjb2wudGl0bGUpLmpvaW4oJywnKSArICdcXG4nO1xyXG5cclxuICAgIGxldCBleHBvcnREYXRhID0gdGhpcy5kYXRhO1xyXG5cclxuICAgIGV4cG9ydERhdGEuZm9yRWFjaChyb3cgPT4ge1xyXG4gICAgICBsZXQgcm93RGF0YSA9IHZpc2libGVDb2x1bW5zLm1hcChjb2wgPT4ge1xyXG4gICAgICAgIC8vIEjDvGNyZSBpw6dlcmnEn2luZGVraSB2aXJnw7xsbGVyIHZlIMOnaWZ0IHTEsXJuYWtsYXLEsSBrYcOnxLHFnyBrYXJha3RlcmkgaWxlIGRlxJ9pxZ90aXJcclxuICAgICAgICBjb25zdCBjZWxsRGF0YSA9IHJvd1tjb2wuZmllbGRdID8gcm93W2NvbC5maWVsZF0udG9TdHJpbmcoKS5yZXBsYWNlKC9cIi9nLCAnXCJcIicpIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIGBcIiR7Y2VsbERhdGF9XCJgO1xyXG4gICAgICB9KS5qb2luKCcsJyk7XHJcbiAgICAgIGNzdkRhdGEgKz0gcm93RGF0YSArICdcXG4nO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NzdkRhdGFdLCB7IHR5cGU6ICd0ZXh0L2NzdicgfSk7XHJcbiAgICBjb25zdCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBhLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xyXG4gICAgYS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCB1cmwpO1xyXG4gICAgYS5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgdGhpcy5leHBvcnRFeGNlbEZpbGVOYW1lICsgJy5jc3YnKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XHJcbiAgICBhLmNsaWNrKCk7XHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQgfCBhbnksIGNvbHVtbjogYW55KSB7XHJcbiAgICB0aGlzLnJlc2l6aW5nQ29sdW1uID0gY29sdW1uO1xyXG4gICAgdGhpcy5zdGFydFggPSBldmVudC5wYWdlWDtcclxuICAgIHRoaXMuc3RhcnRXaWR0aCA9IGV2ZW50LnRhcmdldCEucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aDtcclxuXHJcbiAgICAvLyBFxJ9lciBkcmFnZ2FibGUgaXNlLCBnZcOnaWNpIG9sYXJhayBkZXZyZSBkxLHFn8SxIGLEsXJha1xyXG4gICAgaWYgKHRoaXMuZHJhZ2dhYmxlKSB7XHJcbiAgICAgIHRoaXMudGVtcERyYWdnYWJsZSA9IHRoaXMuZHJhZ2dhYmxlO1xyXG4gICAgICB0aGlzLmRyYWdnYWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDptb3VzZW1vdmUnLCBbJyRldmVudCddKVxyXG4gIG9uTW91c2VNb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICBpZiAodGhpcy5yZXNpemluZ0NvbHVtbikge1xyXG4gICAgICBjb25zdCBvZmZzZXQgPSBldmVudC5wYWdlWCAtIHRoaXMuc3RhcnRYITtcclxuICAgICAgdGhpcy5yZXNpemluZ0NvbHVtbi53aWR0aCA9IHRoaXMuc3RhcnRXaWR0aCEgKyBvZmZzZXQgKyAncHgnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6bW91c2V1cCcpXHJcbiAgb25Nb3VzZVVwID0gKCkgPT4ge1xyXG4gICAgdGhpcy5yZXNpemluZ0NvbHVtbiA9IHVuZGVmaW5lZDtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcclxuXHJcbiAgICAvLyBSZXNpemUgacWfbGVtaSBiaXR0acSfaW5kZSBkcmFnZ2FibGUgZHVydW11bnUgZ2VyaSB5w7xrbGVcclxuICAgIGlmICh0aGlzLnRlbXBEcmFnZ2FibGUpIHtcclxuICAgICAgdGhpcy5kcmFnZ2FibGUgPSB0aGlzLnRlbXBEcmFnZ2FibGU7XHJcbiAgICAgIHRoaXMudGVtcERyYWdnYWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25EcmFnU3RhcnQoZXZlbnQ6IERyYWdFdmVudCwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgdGhpcy5kcmFnZ2VkQ29sdW1uSW5kZXggPSBpbmRleDtcclxuICB9XHJcblxyXG4gIG9uRHJhZ092ZXIoZXZlbnQ6IERyYWdFdmVudCwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gIG9uRHJvcChldmVudDogRHJhZ0V2ZW50LCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHRoaXMuZHJhZ2dlZENvbHVtbkluZGV4ID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBkcmFnZ2VkQ29sdW1uID0gdGhpcy5jb2x1bW5zPy50b0FycmF5KClbdGhpcy5kcmFnZ2VkQ29sdW1uSW5kZXhdO1xyXG4gICAgY29uc3QgdGFyZ2V0Q29sdW1uID0gdGhpcy5jb2x1bW5zPy50b0FycmF5KClbaW5kZXhdO1xyXG5cclxuICAgIGlmIChkcmFnZ2VkQ29sdW1uICYmIHRhcmdldENvbHVtbikge1xyXG4gICAgICBjb25zdCBjb2x1bW5zQXJyYXkgPSB0aGlzLmNvbHVtbnM/LnRvQXJyYXkoKTtcclxuXHJcbiAgICAgIC8vIFJlbW92ZSBkcmFnZ2VkIGNvbHVtbiBhbmQgaW5zZXJ0IGl0IGF0IHRoZSBuZXcgcG9zaXRpb25cclxuICAgICAgY29sdW1uc0FycmF5IS5zcGxpY2UodGhpcy5kcmFnZ2VkQ29sdW1uSW5kZXgsIDEpO1xyXG4gICAgICBjb2x1bW5zQXJyYXkhLnNwbGljZShpbmRleCwgMCwgZHJhZ2dlZENvbHVtbik7XHJcblxyXG4gICAgICB0aGlzLmNvbHVtbnM/LnJlc2V0KGNvbHVtbnNBcnJheSEpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZHJhZ2dlZENvbHVtbkluZGV4ID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0RmllbGRWYWx1ZShpdGVtOiBhbnksIGZpZWxkOiBzdHJpbmcpe1xyXG4gICAgaWYoIWZpZWxkLmluY2x1ZGVzKFwiLlwiKSl7XHJcbiAgICAgIHJldHVybiBpdGVtW2ZpZWxkXVxyXG4gICAgfWVsc2V7XHJcbiAgICAgIGNvbnN0IGZpZWxkcyA9IGZpZWxkLnNwbGl0KFwiLlwiKTtcclxuICAgICAgaWYoZmllbGRzLmxlbmd0aCA9PT0gMil7XHJcbiAgICAgICByZXR1cm4gaXRlbVtmaWVsZHNbMF1dW2ZpZWxkc1sxXV1cclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJWYWx1ZSBub3QgZm91bmQhXCIpOyAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9wZW5Nb2JpbGVGaWx0ZXIoKXtcclxuICAgIHRoaXMuZmxleGlHcmlkRmlsdGVyVHIhLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICB0aGlzLmlzU2hvd01vYmlsZUZpbHRlci5zZXQodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZU1vYmlsZUZpbHRlcigpe1xyXG4gICAgdGhpcy5mbGV4aUdyaWRGaWx0ZXJUciEubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgIHRoaXMuaXNTaG93TW9iaWxlRmlsdGVyLnNldChmYWxzZSk7XHJcbiAgfVxyXG59IiwiPHRpdGxlPkFuZ3VsYXIgRmxleGkgR3JpZDwvdGl0bGU+XHJcbjxkaXYgW2F0dHIuZGF0YS1icy10aGVtZV09XCJ0aGVtZUNsYXNzXCIgY2xhc3M9XCJmbGV4aS1ncmlkLXRhYmxlLWNvbnRhaW5lciBvdmVyZmxvdy14XCIgW25nU3R5bGVdPVwieyd3aWR0aCc6IGF1dG9XaWR0aCA/ICcxMDAlJyA6IHdpZHRofVwiPlxyXG4gIEBpZihzaG93Q2FwdGlvbil7XHJcbiAgICA8ZGl2IGNsYXNzPVwiZmxleGktZ3JpZC1jYXB0aW9uLWRpdlwiPlxyXG4gICAgICA8aDM+e3tjYXB0aW9uVGl0bGV9fTwvaDM+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXhcIiBzdHlsZT1cImdhcDogMTBweDtcIj4gICAgICBcclxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiY2FwdGlvblRlbXBsYXRlXCI+PC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgQGlmKHNob3dFeHBvcnRFeGNlbCl7XHJcbiAgICAgICAgICA8YnV0dG9uIFtuZ0NsYXNzXT1cImV4cG9ydEV4Y2VsQnRuQ2xhc3NcIiAoY2xpY2spPVwib25FeHBvcnRFeGNlbEJ1dHRvbkNsaWNrKClcIj5cclxuICAgICAgICAgICAgPHN2ZyBzdHlsZT1cIndpZHRoOiAxM3B4O1wiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDM4NCA1MTJcIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD1cIk02NCAwQzI4LjcgMCAwIDI4LjcgMCA2NFY0NDhjMCAzNS4zIDI4LjcgNjQgNjQgNjRIMzIwYzM1LjMgMCA2NC0yOC43IDY0LTY0VjE2MEgyNTZjLTE3LjcgMC0zMi0xNC4zLTMyLTMyVjBINjR6TTI1NiAwVjEyOEgzODRMMjU2IDB6TTE1NS43IDI1MC4yTDE5MiAzMDIuMWwzNi4zLTUxLjljNy42LTEwLjkgMjIuNi0xMy41IDMzLjQtNS45czEzLjUgMjIuNiA1LjkgMzMuNEwyMjEuMyAzNDRsNDYuNCA2Ni4yYzcuNiAxMC45IDUgMjUuOC01LjkgMzMuNHMtMjUuOCA1LTMzLjQtNS45TDE5MiAzODUuOGwtMzYuMyA1MS45Yy03LjYgMTAuOS0yMi42IDEzLjUtMzMuNCA1LjlzLTEzLjUtMjIuNi01LjktMzMuNEwxNjIuNyAzNDRsLTQ2LjQtNjYuMmMtNy42LTEwLjktNS0yNS44IDUuOS0zMy40czI1LjgtNSAzMy40IDUuOXpcIi8+PC9zdmc+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICB9XHJcbiAgICAgICAgQGlmKHNob3dDb2x1bW5WaXNpYmlsaXR5KXtcclxuICAgICAgICAgIDxidXR0b24gW25nQ2xhc3NdPVwiY29sdW1uVmlzaWJpbGl0eUJ0bkNsYXNzXCIgdGl0bGU9XCJDb2x1bW4gVmlzaWJpbGl0eVwiIChjbGljayk9XCJ0b2dnbGVDb2x1bW5WaXNpYmlsaXR5RHJvcGRvd24oKVwiPlxyXG4gICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImN1cnNvclwiIHN0eWxlPVwid2lkdGg6IDE1cHg7XCIgdmlld0JveD1cIjAgMCA1MTIgNTEyXCI+PHBhdGggZD1cIk00MCA0OEMyNi43IDQ4IDE2IDU4LjcgMTYgNzJ2NDhjMCAxMy4zIDEwLjcgMjQgMjQgMjRIODhjMTMuMyAwIDI0LTEwLjcgMjQtMjRWNzJjMC0xMy4zLTEwLjctMjQtMjQtMjRINDB6TTE5MiA2NGMtMTcuNyAwLTMyIDE0LjMtMzIgMzJzMTQuMyAzMiAzMiAzMkg0ODBjMTcuNyAwIDMyLTE0LjMgMzItMzJzLTE0LjMtMzItMzItMzJIMTkyem0wIDE2MGMtMTcuNyAwLTMyIDE0LjMtMzIgMzJzMTQuMyAzMiAzMiAzMkg0ODBjMTcuNyAwIDMyLTE0LjMgMzItMzJzLTE0LjMtMzItMzItMzJIMTkyem0wIDE2MGMtMTcuNyAwLTMyIDE0LjMtMzIgMzJzMTQuMyAzMiAzMiAzMkg0ODBjMTcuNyAwIDMyLTE0LjMgMzItMzJzLTE0LjMtMzItMzItMzJIMTkyek0xNiAyMzJ2NDhjMCAxMy4zIDEwLjcgMjQgMjQgMjRIODhjMTMuMyAwIDI0LTEwLjcgMjQtMjRWMjMyYzAtMTMuMy0xMC43LTI0LTI0LTI0SDQwYy0xMy4zIDAtMjQgMTAuNy0yNCAyNHpNNDAgMzY4Yy0xMy4zIDAtMjQgMTAuNy0yNCAyNHY0OGMwIDEzLjMgMTAuNyAyNCAyNCAyNEg4OGMxMy4zIDAgMjQtMTAuNyAyNC0yNFYzOTJjMC0xMy4zLTEwLjctMjQtMjQtMjRINDB6XCIvPjwvc3ZnPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleGktZ3JpZC1kcm9wZG93bi1tZW51XCIgW2NsYXNzLnNob3ddPVwiY29sdW1uVmlzaWJpbGl0eURyb3Bkb3duVmlzaWJsZSgpXCI+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmbGV4aS1ncmlkLWRyb3Bkb3duLXRpdGxlXCI+Q29sdW1uIFZpc2liaWxpdHk8L3A+XHJcbiAgICAgICAgICAgICAgQGZvcihjb2x1bW4gb2YgY29sdW1uczsgdHJhY2sgJGluZGV4KXtcclxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZsZXhpLWdyaWQtZHJvcGRvd24tY2hlY2tib3gtaXRlbVwiIFtmb3JdPVwiY29sdW1uLmZpZWxkXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCBbKG5nTW9kZWwpXT1cImNvbHVtbi52aXNpYmxlXCIgW2lkXT1cImNvbHVtbi5maWVsZFwiIHR5cGU9XCJjaGVja2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICB7eyBjb2x1bW4udGl0bGUgPyBjb2x1bW4udGl0bGUgOiBjb2x1bW4uZmllbGQgfX1cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICB9XHJcbiAgICAgICAgQGlmKHNob3dSZWZyZXNoRGF0YSAmJiBkYXRhQmluZGluZyl7XHJcbiAgICAgICAgICA8YnV0dG9uIFtuZ0NsYXNzXT1cInJlZnJlc2hEYXRhQnRuQ2xhc3NcIiAoY2xpY2spPVwicmVmcmVzaERhdGFNZXRob2QoKVwiPlxyXG4gICAgICAgICAgICA8c3ZnIHN0eWxlPVwid2lkdGg6IDEzcHg7XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiPjwhLS0hRm9udCBBd2Vzb21lIEZyZWUgNi41LjIgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UvZnJlZSBDb3B5cmlnaHQgMjAyNCBGb250aWNvbnMsIEluYy4tLT48cGF0aCBkPVwiTTQ2My41IDIyNEg0NzJjMTMuMyAwIDI0LTEwLjcgMjQtMjRWNzJjMC05LjctNS44LTE4LjUtMTQuOC0yMi4ycy0xOS4zLTEuNy0yNi4yIDUuMkw0MTMuNCA5Ni42Yy04Ny42LTg2LjUtMjI4LjctODYuMi0zMTUuOCAxYy04Ny41IDg3LjUtODcuNSAyMjkuMyAwIDMxNi44czIyOS4zIDg3LjUgMzE2LjggMGMxMi41LTEyLjUgMTIuNS0zMi44IDAtNDUuM3MtMzIuOC0xMi41LTQ1LjMgMGMtNjIuNSA2Mi41LTE2My44IDYyLjUtMjI2LjMgMHMtNjIuNS0xNjMuOCAwLTIyNi4zYzYyLjItNjIuMiAxNjIuNy02Mi41IDIyNS4zLTFMMzI3IDE4M2MtNi45IDYuOS04LjkgMTcuMi01LjIgMjYuMnMxMi41IDE0LjggMjIuMiAxNC44SDQ2My41elwiLz48L3N2Zz5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIH1cclxuICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXJpZ2h0OiAxMHB4O1wiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxuIDx0YWJsZSBbbmdTdHlsZV09XCJ7J21pbi13aWR0aCc6ICF1c2VNaW5XaWR0aCA/ICcxMDAlJyA6IG1pbldpZHRofVwiPlxyXG4gICA8dGhlYWQ+ICAgICBcclxuICAgICA8dHI+XHJcbiAgICAgICBAaWYoc2hvd0luZGV4KXtcclxuICAgICAgICAgPHRoIFtuZ1N0eWxlXT1cInsnd2lkdGgnOiBpbmRleFdpZHRofVwiPiM8L3RoPlxyXG4gICAgICAgfVxyXG4gICAgICAgQGZvcihjb2x1bW4gb2YgY29sdW1uczsgdHJhY2sgJGluZGV4KXsgICAgICAgICAgXHJcbiAgICAgICAgIEBpZihzb3J0YWJsZSAmJiBjb2x1bW4uc29ydGFibGUgJiYgY29sdW1uLmZpZWxkICYmIGRhdGEubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgPHRoIFtuZ1N0eWxlXT1cInsnd2lkdGgnOiBjb2x1bW4ud2lkdGh9XCIgY2xhc3M9XCJjdXJzb3IgZmxleGktZ3JpZC1ib3JkZXJcIiBbaGlkZGVuXT1cIiFjb2x1bW4udmlzaWJsZVwiXHJcbiAgICAgICAgICAgICAgIFtkcmFnZ2FibGVdPVwiKGRyYWdnYWJsZSAmJiBjb2x1bW4uZHJhZ2dhYmxlKVwiXHJcbiAgICAgICAgICAgICAgIChkcmFnc3RhcnQpPVwib25EcmFnU3RhcnQoJGV2ZW50LCAkaW5kZXgpXCIgXHJcbiAgICAgICAgICAgICAgIChkcmFnb3Zlcik9XCJvbkRyYWdPdmVyKCRldmVudCwgJGluZGV4KVwiIFxyXG4gICAgICAgICAgICAgICAoZHJvcCk9XCJvbkRyb3AoJGV2ZW50LCAkaW5kZXgpXCI+XHJcbiAgICAgICAgICAgICBAaWYocmVzaXphYmxlICYmIGNvbHVtbi5yZXNpemFibGUpe1xyXG4gICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleGktZ3JpZC1yZXNpemUtaGFuZGxlXCIgKG1vdXNlZG93bik9XCJvbk1vdXNlRG93bigkZXZlbnQsIGNvbHVtbilcIj48L2Rpdj5cclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIDxkaXYgKGNsaWNrKT1cInNvcnQoY29sdW1uLmZpZWxkKVwiPlxyXG4gICAgICAgICAgICAgICA8c3Bhbj57eyBjb2x1bW4udGl0bGUgPyBjb2x1bW4udGl0bGUgOiBjb2x1bW4uZmllbGQgfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXMtMlwiPlxyXG4gICAgICAgICAgICAgICAgIEBpZih0aGlzLnN0YXRlLnNvcnQuZmllbGQgPT09IGNvbHVtbi5maWVsZCl7XHJcbiAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cInN0YXRlLnNvcnQuZmllbGQgPT09IGNvbHVtbi5maWVsZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICB7eyBzdGF0ZS5zb3J0LmRpciA9PT0gJ2FzYycgPyAn4oaRJyA6ICfihpMnIH19XHJcbiAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgIH1AZWxzZSB7XHJcbiAgICAgICAgICAgPHRoIFxyXG4gICAgICAgICAgICAgW2RyYWdnYWJsZV09XCIoZHJhZ2dhYmxlICYmIGNvbHVtbi5kcmFnZ2FibGUpXCIgXHJcbiAgICAgICAgICAgICBbbmdTdHlsZV09XCJ7J3dpZHRoJzogY29sdW1uLndpZHRofVwiIFxyXG4gICAgICAgICAgICAgY2xhc3M9XCJmbGV4aS1ncmlkLWJvcmRlclwiIFxyXG4gICAgICAgICAgICAgW2hpZGRlbl09XCIhY29sdW1uLnZpc2libGVcIlxyXG4gICAgICAgICAgICAgKGRyYWdzdGFydCk9XCJvbkRyYWdTdGFydCgkZXZlbnQsICRpbmRleClcIiBcclxuICAgICAgICAgICAgIChkcmFnb3Zlcik9XCJvbkRyYWdPdmVyKCRldmVudCwgJGluZGV4KVwiIFxyXG4gICAgICAgICAgICAgKGRyb3ApPVwib25Ecm9wKCRldmVudCwgJGluZGV4KVwiPlxyXG4gICAgICAgICAgICAgQGlmKHJlc2l6YWJsZSAmJiBjb2x1bW4ucmVzaXphYmxlKXtcclxuICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXhpLWdyaWQtcmVzaXplLWhhbmRsZVwiIChtb3VzZWRvd24pPVwib25Nb3VzZURvd24oJGV2ZW50LCBjb2x1bW4pXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICA8c3Bhbj57eyBjb2x1bW4udGl0bGUgPyBjb2x1bW4udGl0bGUgOiBjb2x1bW4uZmllbGQgfX08L3NwYW4+XHJcbiAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICAgPC90cj4gXHJcbiAgICAgQGlmKGZpbHRlcmFibGUpe1xyXG4gICAgICA8dHIgY2xhc3M9XCJmbGV4aS1ncmlkLW1vYmlsZS1maWx0ZXItdHJcIj5cclxuICAgICAgICA8dGggY29sU3Bhbj1cIjJcIj5cclxuICAgICAgICAgIEBpZihpc1Nob3dNb2JpbGVGaWx0ZXIoKSl7XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJmbGV4aS1ncmlkLWJ0blwiIChjbGljayk9XCJjbG9zZU1vYmlsZUZpbHRlcigpXCI+ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwic3ZnLW1vYmlsZSBjdXJzb3JcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCA1NzYgNTEyXCI+PHBhdGggZD1cIk0zLjkgMjIuOUMxMC41IDguOSAyNC41IDAgNDAgMEg0NzJjMTUuNSAwIDI5LjUgOC45IDM2LjEgMjIuOXM0LjYgMzAuNS01LjIgNDIuNUwzOTYuNCAxOTUuNkMzMTYuMiAyMTIuMSAyNTYgMjgzIDI1NiAzNjhjMCAyNy40IDYuMyA1My40IDE3LjUgNzYuNWMtMS42LS44LTMuMi0xLjgtNC43LTIuOWwtNjQtNDhjLTguMS02LTEyLjgtMTUuNS0xMi44LTI1LjZWMjg4LjlMOSA2NS4zQy0uNyA1My40LTIuOCAzNi44IDMuOSAyMi45ek00MzIgMjI0YTE0NCAxNDQgMCAxIDEgMCAyODggMTQ0IDE0NCAwIDEgMSAwLTI4OHptNTkuMyAxMDcuM2M2LjItNi4yIDYuMi0xNi40IDAtMjIuNnMtMTYuNC02LjItMjIuNiAwTDQzMiAzNDUuNGwtMzYuNy0zNi43Yy02LjItNi4yLTE2LjQtNi4yLTIyLjYgMHMtNi4yIDE2LjQgMCAyMi42TDQwOS40IDM2OGwtMzYuNyAzNi43Yy02LjIgNi4yLTYuMiAxNi40IDAgMjIuNnMxNi40IDYuMiAyMi42IDBMNDMyIDM5MC42bDM2LjcgMzYuN2M2LjIgNi4yIDE2LjQgNi4yIDIyLjYgMHM2LjItMTYuNCAwLTIyLjZMNDU0LjYgMzY4bDM2LjctMzYuN3pcIi8+PC9zdmc+XHJcbiAgICAgICAgICAgICAgRmlsdHJleWkgS2FwYXRcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICB9QGVsc2Uge1xyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleGktZ3JpZC1idG5cIiAoY2xpY2spPVwib3Blbk1vYmlsZUZpbHRlcigpXCI+XHJcbiAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInN2Zy1tb2JpbGUgY3Vyc29yXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiPjxwYXRoIGQ9XCJNMy45IDU0LjlDMTAuNSA0MC45IDI0LjUgMzIgNDAgMzJINDcyYzE1LjUgMCAyOS41IDguOSAzNi4xIDIyLjlzNC42IDMwLjUtNS4yIDQyLjVMMzIwIDMyMC45VjQ0OGMwIDEyLjEtNi44IDIzLjItMTcuNyAyOC42cy0yMy44IDQuMy0zMy41LTNsLTY0LTQ4Yy04LjEtNi0xMi44LTE1LjUtMTIuOC0yNS42VjMyMC45TDkgOTcuM0MtLjcgODUuNC0yLjggNjguOCAzLjkgNTQuOXpcIi8+PC9zdmc+XHJcbiAgICAgICAgICAgICAgRmlsdHJleWkgQcOnXHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvdGg+XHJcbiAgICAgIDwvdHI+XHJcbiAgICAgIDx0ciBjbGFzcz1cImZsZXhpLWdyaWQtZmlsdGVyLXRyXCIgI2ZsZXhpR3JpZEZpbHRlclRyPlxyXG4gICAgICAgIEBpZihzaG93SW5kZXggJiYgIWlzU2hvd01vYmlsZUZpbHRlcigpKXtcclxuICAgICAgICAgIDx0aCBjbGFzcz1cImZsZXhpLWdyaWQtZmlsdGVyLXRoXCIgW25nU3R5bGVdPVwieyd3aWR0aCc6IGluZGV4V2lkdGh9XCI+PC90aD5cclxuICAgICAgICB9XHJcbiAgICAgICAgQGZvcihjb2x1bW4gb2YgY29sdW1uczsgdHJhY2sgJGluZGV4KXsgICAgICAgICAgXHJcbiAgICAgICAgICBAaWYoY29sdW1uLmZpbHRlcmFibGUgJiYgY29sdW1uLmZpZWxkKXsgICAgICAgICAgICBcclxuICAgICAgICAgICAgPHRoIGNsYXNzPVwiZmxleGktZ3JpZC1maWx0ZXItdGhcIiBbaGlkZGVuXT1cIiFjb2x1bW4udmlzaWJsZVwiIFthdHRyLmRhdGEtbGFiZWxdPVwiY29sdW1uLnRpdGxlID8gY29sdW1uLnRpdGxlIDogY29sdW1uLmZpZWxkXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBmbGV4aS1ncmlkLWZpbHRlci1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgIEBpZihjb2x1bW4uZmlsdGVyVHlwZSA9PT0gXCJ0ZXh0XCIpe1xyXG4gICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmbGV4aS1ncmlkLWZpbHRlci1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgWyhuZ01vZGVsKV09XCJjb2x1bW4udmFsdWVcIiAoaW5wdXQpPVwiZmlsdGVyKGNvbHVtbi5maWVsZCwgY29sdW1uLmZpbHRlck9wZXJhdG9yLCBjb2x1bW4udmFsdWUsIGNvbHVtbi5maWx0ZXJUeXBlKVwiPlxyXG4gICAgICAgICAgICAgICAgICBAaWYoIWNvbHVtbi52YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInN2ZyBjdXJzb3Igc2hvdy1maWx0ZXJcIiAoY2xpY2spPVwidG9nZ2xlRmlsdGVyRHJvcGRvd24oY29sdW1uLmZpZWxkKVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIj48cGF0aCBkPVwiTTMuOSA1NC45QzEwLjUgNDAuOSAyNC41IDMyIDQwIDMySDQ3MmMxNS41IDAgMjkuNSA4LjkgMzYuMSAyMi45czQuNiAzMC41LTUuMiA0Mi41TDMyMCAzMjAuOVY0NDhjMCAxMi4xLTYuOCAyMy4yLTE3LjcgMjguNnMtMjMuOCA0LjMtMzMuNS0zbC02NC00OGMtOC4xLTYtMTIuOC0xNS41LTEyLjgtMjUuNlYzMjAuOUw5IDk3LjNDLS43IDg1LjQtMi44IDY4LjggMy45IDU0Ljl6XCIvPjwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4aS1ncmlkLWRyb3Bkb3duLW1lbnVcIiBbY2xhc3Muc2hvd109XCJmaWx0ZXJEcm9wZG93blZpc2libGUoKVtjb2x1bW4uZmllbGRdXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICBAZm9yKGZpbHRlclR5cGUgb2YgdGV4dEZpbHRlclR5cGVzKCk7IHRyYWNrIGZpbHRlclR5cGUub3BlcmF0b3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImZsZXhpLWdyaWQtZHJvcGRvd24taXRlbVwiIFtuZ0NsYXNzXT1cImNvbHVtbi5maWx0ZXJPcGVyYXRvciA9PT0gZmlsdGVyVHlwZS5vcGVyYXRvciA/ICdmbGV4aS1ncmlkLWFjdGl2ZScgOiAnJ1wiIChjbGljayk9XCJhcHBseUZpbHRlcihjb2x1bW4sIGZpbHRlclR5cGUub3BlcmF0b3IpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgZmlsdGVyVHlwZS52YWx1ZSB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfUBlbHNlIGlmKGNvbHVtbi5maWx0ZXJUeXBlID09PSBcImRhdGVcIil7XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZsZXhpLWdyaWQtZmlsdGVyLWlucHV0XCIgdHlwZT1cImRhdGVcIiBbKG5nTW9kZWwpXT1cImNvbHVtbi52YWx1ZVwiIChpbnB1dCk9XCJmaWx0ZXIoY29sdW1uLmZpZWxkLCBjb2x1bW4uZmlsdGVyT3BlcmF0b3IsIGNvbHVtbi52YWx1ZSwgY29sdW1uLmZpbHRlclR5cGUpXCI+XHJcbiAgICAgICAgICAgICAgICB9QGVsc2UgaWYoY29sdW1uLmZpbHRlclR5cGUgPT09IFwiZGF0ZS10aW1lXCIpe1xyXG4gICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmbGV4aS1ncmlkLWZpbHRlci1pbnB1dFwiIHR5cGU9XCJkYXRldGltZS1sb2NhbFwiIFsobmdNb2RlbCldPVwiY29sdW1uLnZhbHVlXCIgKGlucHV0KT1cImZpbHRlcihjb2x1bW4uZmllbGQsIGNvbHVtbi5maWx0ZXJPcGVyYXRvciwgY29sdW1uLnZhbHVlLCBjb2x1bW4uZmlsdGVyVHlwZSlcIj5cclxuICAgICAgICAgICAgICAgIH1AZWxzZSBpZihjb2x1bW4uZmlsdGVyVHlwZSA9PT0gXCJudW1iZXJcIil7XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZsZXhpLWdyaWQtZmlsdGVyLWlucHV0XCIgdHlwZT1cIm51bWJlclwiIFsobmdNb2RlbCldPVwiY29sdW1uLnZhbHVlXCIgKGlucHV0KT1cImZpbHRlcihjb2x1bW4uZmllbGQsIGNvbHVtbi5maWx0ZXJPcGVyYXRvciwgY29sdW1uLnZhbHVlLCBjb2x1bW4uZmlsdGVyVHlwZSlcIj5cclxuICAgICAgICAgICAgICAgICAgQGlmKCFjb2x1bW4udmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJzdmcgY3Vyc29yIHNob3ctZmlsdGVyXCIgKGNsaWNrKT1cInRvZ2dsZUZpbHRlckRyb3Bkb3duKGNvbHVtbi5maWVsZClcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCA1MTIgNTEyXCI+PHBhdGggZD1cIk0zLjkgNTQuOUMxMC41IDQwLjkgMjQuNSAzMiA0MCAzMkg0NzJjMTUuNSAwIDI5LjUgOC45IDM2LjEgMjIuOXM0LjYgMzAuNS01LjIgNDIuNUwzMjAgMzIwLjlWNDQ4YzAgMTIuMS02LjggMjMuMi0xNy43IDI4LjZzLTIzLjggNC4zLTMzLjUtM2wtNjQtNDhjLTguMS02LTEyLjgtMTUuNS0xMi44LTI1LjZWMzIwLjlMOSA5Ny4zQy0uNyA4NS40LTIuOCA2OC44IDMuOSA1NC45elwiLz48L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleGktZ3JpZC1kcm9wZG93bi1tZW51XCIgW2NsYXNzLnNob3ddPVwiZmlsdGVyRHJvcGRvd25WaXNpYmxlKClbY29sdW1uLmZpZWxkXVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgQGZvcihmaWx0ZXJUeXBlIG9mIG51bWJlckZpbHRlclR5cGVzKCk7IHRyYWNrIGZpbHRlclR5cGUub3BlcmF0b3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImZsZXhpLWdyaWQtZHJvcGRvd24taXRlbVwiIFtuZ0NsYXNzXT1cImNvbHVtbi5maWx0ZXJPcGVyYXRvciA9PT0gZmlsdGVyVHlwZS5vcGVyYXRvciA/ICdmbGV4aS1ncmlkLWFjdGl2ZScgOiAnJ1wiIChjbGljayk9XCJhcHBseUZpbHRlcihjb2x1bW4sIGZpbHRlclR5cGUub3BlcmF0b3IpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgZmlsdGVyVHlwZS52YWx1ZSB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBAaWYoc2hvd0NsZWFyRmlsdGVyKGNvbHVtbi52YWx1ZSkpe1xyXG4gICAgICAgICAgICAgICAgICA8c3ZnIChjbGljayk9XCJjbGVhckZpbHRlcihjb2x1bW4uZmllbGQpXCIgY2xhc3M9XCJzdmcgY3Vyc29yXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgNTc2IDUxMlwiPjxwYXRoIGQ9XCJNMy45IDIyLjlDMTAuNSA4LjkgMjQuNSAwIDQwIDBINDcyYzE1LjUgMCAyOS41IDguOSAzNi4xIDIyLjlzNC42IDMwLjUtNS4yIDQyLjVMMzk2LjQgMTk1LjZDMzE2LjIgMjEyLjEgMjU2IDI4MyAyNTYgMzY4YzAgMjcuNCA2LjMgNTMuNCAxNy41IDc2LjVjLTEuNi0uOC0zLjItMS44LTQuNy0yLjlsLTY0LTQ4Yy04LjEtNi0xMi44LTE1LjUtMTIuOC0yNS42VjI4OC45TDkgNjUuM0MtLjcgNTMuNC0yLjggMzYuOCAzLjkgMjIuOXpNNDMyIDIyNGExNDQgMTQ0IDAgMSAxIDAgMjg4IDE0NCAxNDQgMCAxIDEgMC0yODh6bTU5LjMgMTA3LjNjNi4yLTYuMiA2LjItMTYuNCAwLTIyLjZzLTE2LjQtNi4yLTIyLjYgMEw0MzIgMzQ1LjRsLTM2LjctMzYuN2MtNi4yLTYuMi0xNi40LTYuMi0yMi42IDBzLTYuMiAxNi40IDAgMjIuNkw0MDkuNCAzNjhsLTM2LjcgMzYuN2MtNi4yIDYuMi02LjIgMTYuNCAwIDIyLjZzMTYuNCA2LjIgMjIuNiAwTDQzMiAzOTAuNmwzNi43IDM2LjdjNi4yIDYuMiAxNi40IDYuMiAyMi42IDBzNi4yLTE2LjQgMC0yMi42TDQ1NC42IDM2OGwzNi43LTM2Ljd6XCIvPjwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgfUBlbHNlIHtcclxuICAgICAgICAgICAgQGlmKCFpc1Nob3dNb2JpbGVGaWx0ZXIoKSl7XHJcbiAgICAgICAgICAgICAgPHRoIFtoaWRkZW5dPVwiIWNvbHVtbi52aXNpYmxlXCI+PC90aD5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgPC90cj5cclxuICAgIH0gICAgXHJcbiAgIDwvdGhlYWQ+XHJcbiAgIDx0Ym9keSBjbGFzcz1cInJlbGF0aXZlXCIgW25nU3R5bGVdPVwieydoZWlnaHQnOiBhdXRvSGVpZ2h0ID8gJzEwMCUnIDogaGVpZ2h0fVwiIHN0eWxlPVwibWluLWhlaWdodDogMTAwcHg7XCIgW25nU3R5bGVdPVwidGJvZHlTdHlsZVwiPlxyXG4gICAgIEBpZihsb2FkaW5nKXsgICAgICAgIFxyXG4gICAgICAgPGRpdiBjbGFzcz1cImZsZXhpLWdyaWQtc3Bpbm5lci1jb250YWluZXJcIj5cclxuICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXhpLWdyaWQtc3Bpbm5lci0xXCI+PC9kaXY+XHJcbiAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4aS1ncmlkLXNwaW5uZXItMlwiPjwvZGl2PlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgfVxyXG4gICAgIEBpZihkYXRhLmxlbmd0aCA+IDApeyAgICAgIFxyXG4gICAgICAgQGZvcihpdGVtIG9mIHBhZ2VkRGF0YSgpOyB0cmFjayAkaW5kZXg7IGxldCBpID0gJGluZGV4KXtcclxuICAgICAgICAgPHRyIFtuZ1N0eWxlXT1cInsnbWluLWhlaWdodCc6IHRyTWluSGVpZ2h0fVwiPlxyXG4gICAgICAgICAgIEBpZihzaG93SW5kZXgpe1xyXG4gICAgICAgICAgICAgQGlmKCFwYWdlYWJsZSl7XHJcbiAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImZsZXhpLWdyaWQtaW5kZXgtdGRcIiBbbmdTdHlsZV09XCJ7J3dpZHRoJzogaW5kZXhXaWR0aH1cIiBbYXR0ci5kYXRhLWxhYmVsXT1cIicjJ1wiPnt7KCRpbmRleCArIDEpfX08L3RkPlxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgQGVsc2V7XHJcbiAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImZsZXhpLWdyaWQtaW5kZXgtdGRcIiBbbmdTdHlsZV09XCJ7J3dpZHRoJzogaW5kZXhXaWR0aH1cIiBbYXR0ci5kYXRhLWxhYmVsXT1cIicjJ1wiPnt7KCRpbmRleCArICgoc3RhdGUucGFnZU51bWJlciAtMSkgKiArc3RhdGUucGFnZVNpemUpKSArIDF9fTwvdGQ+XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIEBmb3IoY29sdW1uIG9mIGNvbHVtbnM7IHRyYWNrICRpbmRleCl7XHJcbiAgICAgICAgICAgICBAaWYoY29sdW1uLmNvbHVtblRlbXBsYXRlICYmIGNvbHVtbi52aXNpYmxlKXtcclxuICAgICAgICAgICAgICAgPHRkIFtuZ1N0eWxlXT1cInsnd2lkdGgnOiBjb2x1bW4ud2lkdGgsICd0ZXh0LWFsaWduJzogY29sdW1uLnRleHRBbGlnbn1cIiBbbmdDbGFzc109XCJjb2x1bW4uY2xhc3NOYW1lXCIgW2F0dHIuZGF0YS1sYWJlbF09XCJjb2x1bW4udGl0bGUgPyBjb2x1bW4udGl0bGUgOiBjb2x1bW4uZmllbGRcIj5cclxuICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiY29sdW1uLmNvbHVtblRlbXBsYXRlOyBjb250ZXh0OiB7dmFsdWU6IGl0ZW1bY29sdW1uLmZpZWxkXSwgaXRlbTogaXRlbSwgaW5kZXg6IGl9XCI+PC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICB9QGVsc2Uge1xyXG4gICAgICAgICAgICAgICA8dGQgW25nU3R5bGVdPVwieyd3aWR0aCc6IGNvbHVtbi53aWR0aCwgJ3RleHQtYWxpZ24nOiBjb2x1bW4udGV4dEFsaWdufVwiIFtoaWRkZW5dPVwiIWNvbHVtbi52aXNpYmxlXCIgW25nQ2xhc3NdPVwiY29sdW1uLmNsYXNzTmFtZVwiIFtuZ0NsYXNzXT1cImNvbHVtbi5oaWRlT3ZlcmZsb3cgPyAndGV4dC1vdmVyZmxvdy1oaWRkZW4nIDogJydcIiBbYXR0ci5kYXRhLWxhYmVsXT1cImNvbHVtbi50aXRsZSA/IGNvbHVtbi50aXRsZSA6IGNvbHVtbi5maWVsZFwiIFt0aXRsZV09XCJpdGVtID8gZ2V0RmllbGRWYWx1ZShpdGVtLCBjb2x1bW4uZmllbGQpIDogJydcIj5cclxuICAgICAgICAgICAgICAgICBAaWYoY29sdW1uLmZpZWxkKXtcclxuICAgICAgICAgICAgICAgICAgIEBpZigoY29sdW1uLmZpbHRlclR5cGUgPT09IFwiZGF0ZVwiIHx8IGNvbHVtbi5maWx0ZXJUeXBlID09PSBcImRhdGUtdGltZVwiKSAmJiBjb2x1bW4uZmlsdGVyVHlwZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgIHt7IGdldEZpZWxkVmFsdWUoaXRlbSwgY29sdW1uLmZpZWxkKSB8IGRhdGU6IGNvbHVtbi5mb3JtYXQhIH19XHJcbiAgICAgICAgICAgICAgICAgICB9QGVsc2UgaWYoY29sdW1uLmZpbHRlclR5cGUgPT09IFwibnVtYmVyXCIgJiYgY29sdW1uLmZpbHRlclR5cGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICBAaWYoY29sdW1uLmZvcm1hdCA9PT0gXCJuXCIgfHwgY29sdW1uLmZvcm1hdCA9PT0gbnVsbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAge3sgKGdldEZpZWxkVmFsdWUoaXRlbSwgY29sdW1uLmZpZWxkKSB8IHRyQ3VycmVuY3k6IFwiXCI6IHRydWU6IGNvbHVtbi5mcmFjdGlvbikgfX1cclxuICAgICAgICAgICAgICAgICAgICAgfUBlbHNlIGlmKGNvbHVtbi5mb3JtYXQgPT09IFwiY1wiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICB7eyAoZ2V0RmllbGRWYWx1ZShpdGVtLCBjb2x1bW4uZmllbGQpIHwgdHJDdXJyZW5jeSA6IGNvbHVtbi5zeW1ib2w6IGNvbHVtbi5zaG93U3ltYm9sSW5Gcm9udDogY29sdW1uLmZyYWN0aW9uKSB9fVxyXG4gICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIEBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAge3sgZ2V0RmllbGRWYWx1ZShpdGVtLCBjb2x1bW4uZmllbGQpIH19XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgPC90cj5cclxuICAgICAgIH1cclxuICAgICB9QGVsc2Uge1xyXG4gICAgICAgQGlmKCFsb2FkaW5nKXtcclxuICAgICAgICAgPHRyIHN0eWxlPVwiaGVpZ2h0OiAxMDAlO1wiIFtuZ1N0eWxlXT1cInsnbWluLWhlaWdodCc6IHRyTWluSGVpZ2h0fVwiPlxyXG4gICAgICAgICAgIDx0ZCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjtcIiBbY29sU3Bhbl09XCJjb2x1bW5zPy5sZW5ndGhcIj5cclxuICAgICAgICAgICAgIDxoND5Hw7ZzdGVyaWxlY2VrIHZlcmkgYnVsdW5hbWFkxLEhPC9oND5cclxuICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICA8L3RyPlxyXG4gICAgICAgfVxyXG4gICAgIH1cclxuICAgPC90Ym9keT5cclxuICAgPHRmb290PlxyXG4gICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJmb290ZXJUZW1wbGF0ZVwiIGNsYXNzPVwib3ZlcmZsb3cteFwiPjwvbmctY29udGFpbmVyPiAgICAgXHJcbiAgIDwvdGZvb3Q+XHJcbiA8L3RhYmxlPlxyXG4gIEBpZihwYWdlYWJsZSl7XHJcbiAgICA8ZGl2IGNsYXNzPVwiZmxleGktZ3JpZC1wYWdpbmF0aW9uLWNvbnRhaW5lclwiPlxyXG4gICAgICBAaWYoIWlzU2hvd01vYmlsZUZpbHRlcigpKXtcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleGktZ3JpZC1wYWdpbmF0aW9uLXBhcnQtb25lXCI+XHJcbiAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZmxleGktZ3JpZC1wYWdlc2l6ZS1zZWxlY3RcIiBbbmdNb2RlbF09XCJzdGF0ZS5wYWdlU2l6ZVwiIChjaGFuZ2UpPVwiY2hhbmdlUGFnZVNpemUoJGV2ZW50KVwiPlxyXG4gICAgICAgICAgICBAZm9yKHNpemUgb2YgcGFnZVNpemVMaXN0OyB0cmFjayBzaXplKXtcclxuICAgICAgICAgICAgPG9wdGlvbj57e3NpemV9fTwvb3B0aW9uPlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleGktZ3JpZC1wYWdpbmF0aW9uLXBhcnQtdHdvXCI+XHJcbiAgICAgICAgICA8dWwgY2xhc3M9XCJmbGV4aS1ncmlkLXBhZ2luYXRpb25cIj5cclxuICAgICAgICAgICAgQGlmKHRoaXMucGFnZU51bWJlcnMoKS5sZW5ndGggPiAxKXsgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cImZsZXhpLWdyaWQtcGFnZS1pdGVtXCIgW25nQ2xhc3NdPVwic3RhdGUucGFnZU51bWJlciA9PT0gMSA/ICdkaXNhYmxlZCc6ICcnXCIgKGNsaWNrKT1cImNoYW5nZVBhZ2UoMSlcIj5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZmxleGktZ3JpZC1wYWdlLWxpbmtcIiBhcmlhLWxhYmVsPVwiUHJldmlvdXNcIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JmxhcXVvOzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cImZsZXhpLWdyaWQtcGFnZS1pdGVtXCIgW25nQ2xhc3NdPVwic3RhdGUucGFnZU51bWJlciA9PT0gMSA/ICdkaXNhYmxlZCc6ICcnXCJcclxuICAgICAgICAgICAgICAgIChjbGljayk9XCJjaGFuZ2VQYWdlKHN0YXRlLnBhZ2VOdW1iZXIgLSAxKVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJmbGV4aS1ncmlkLXBhZ2UtbGlua1wiIGFyaWEtbGFiZWw9XCJQcmV2aW91c1wiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mIzgyNDk7PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgQGlmKHBhZ2VOdW1iZXJzKClbMF0gIT09IDEpe1xyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cImZsZXhpLWdyaWQtcGFnZS1pdGVtXCIgKGNsaWNrKT1cInByZXZpb3VzUGFnZUdyb3VwKClcIj5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZmxleGktZ3JpZC1wYWdlLWxpbmtcIj4uLi48L2E+XHJcbiAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgQGZvcihwYWdlTnVtYmVyIG9mIHBhZ2VOdW1iZXJzKCk7IHRyYWNrIHBhZ2VOdW1iZXIpe1xyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cImZsZXhpLWdyaWQtcGFnZS1pdGVtXCIgW25nQ2xhc3NdPVwic3RhdGUucGFnZU51bWJlciA9PT0gcGFnZU51bWJlciA/ICdmbGV4aS1ncmlkLWFjdGl2ZSc6ICcnXCI+XHJcbiAgICAgICAgICAgICAgICA8YSAoY2xpY2spPVwiY2hhbmdlUGFnZShwYWdlTnVtYmVyKVwiIGNsYXNzPVwiZmxleGktZ3JpZC1wYWdlLWxpbmtcIj5cclxuICAgICAgICAgICAgICAgICAge3twYWdlTnVtYmVyfX1cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBAaWYocGFnZU51bWJlcnMoKVtwYWdlTnVtYmVycygpLmxlbmd0aCAtIDFdICE9PSB0b3RhbFBhZ2VDb3VudCgpKXtcclxuICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJmbGV4aS1ncmlkLXBhZ2UtaXRlbVwiIChjbGljayk9XCJuZXh0UGFnZUdyb3VwKClcIj5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZmxleGktZ3JpZC1wYWdlLWxpbmtcIj4uLi48L2E+XHJcbiAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPGxpIGNsYXNzPVwiZmxleGktZ3JpZC1wYWdlLWl0ZW1cIiBbbmdDbGFzc109XCJzdGF0ZS5wYWdlTnVtYmVyID09PSB0b3RhbFBhZ2VDb3VudCgpID8gJ2Rpc2FibGVkJzogJydcIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cImNoYW5nZVBhZ2Uoc3RhdGUucGFnZU51bWJlciArIDEpXCI+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImZsZXhpLWdyaWQtcGFnZS1saW5rXCIgYXJpYS1sYWJlbD1cIk5leHRcIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JiM4MjUwOzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cImZsZXhpLWdyaWQtcGFnZS1pdGVtXCIgW25nQ2xhc3NdPVwic3RhdGUucGFnZU51bWJlciA9PT0gdG90YWxQYWdlQ291bnQoKSA/ICdkaXNhYmxlZCc6ICcnXCJcclxuICAgICAgICAgICAgICAgIChjbGljayk9XCJjaGFuZ2VQYWdlKHRvdGFsUGFnZUNvdW50KCkpXCI+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImZsZXhpLWdyaWQtcGFnZS1saW5rXCIgYXJpYS1sYWJlbD1cIk5leHRcIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnJhcXVvOzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA8L3VsPiAgICAgICAgXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIH1cclxuICAgICAgPGRpdiBjbGFzcz1cImZsZXhpLWdyaWQtcGFnaW5hdGlvbi1wYXJ0LXRoaXJkXCI+XHJcbiAgICAgICAgPHNwYW4+IFxyXG4gICAgICAgICAgICB7e3N0YXRlLnBhZ2VOdW1iZXJ9fSAtIHt7dG90YWxQYWdlQ291bnQoKX19IG9mIHt7KHRvdGFsIHwgY3VycmVuY3k6ICcnOiAnJzogJzEuMCcpIS5yZXBsYWNlKCcsJywnLicpfX0gaXRlbXMgXHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxuPC9kaXY+Il19